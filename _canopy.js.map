{"version":3,"file":"canopy.js","mappings":"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","sources":["webpack:///./cli/shared/remove_style_characters.js","webpack:///./cli/shared/topic.js","webpack:///./client/display/display_path.js","webpack:///./client/display/helpers.js","webpack:///./client/display/update_view.js","webpack:///./client/helpers/getters.js","webpack:///./client/helpers/scrollable_container.js","webpack:///./client/models/link.js","webpack:///./client/models/paragraph.js","webpack:///./client/models/path.js","webpack:///./client/render/render_dom_tree.js","webpack:///./client/render/fetch_and_render_path.js","webpack:///./client/render/helpers.js","webpack:///./client/render/click_handlers.js","webpack:///./client/render/render_token_element.js","webpack:///./client/requests/request_cache.js","webpack:///./client/requests/request_json.js","webpack:///./client/requests/helpers.js","webpack:///./client/style/canopy.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack:///./node_modules/css.escape/css.escape.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack:///./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack:///./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack:///./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack:///./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/nonce","webpack:///./client/style/canopy.scss?ec98","webpack:///./client/keys/key_handlers.js","webpack:///./client/keys/arrow_keys.js","webpack:///./client/keys/register_key_listeners.js","webpack:///./client/history/register_pop_state_listener.js","webpack:///./client/canopy.js"],"sourcesContent":["/*\nThis function removes style characters from a string, eg '*_a_* -> 'a'\nIn order to remove multiple layers of wrapping, eg *_a_*, each call removes the outermost layer,\n  then, if there was a difference between the previous value and this one, we try once more.\n  If there was no difference, then we have run out of style tokens and can return.\n*/\n\nfunction removeStyleCharacters(string) {\n  let newString = string.replace(/(.*?(?:^|[^\\\\]))([_`*~])(\\S*?[^\\\\])\\2(.*)/, '$1$3$4'); // style characters within words if no spaces\n  newString = newString.replace(/(.*?(?:^|[^\\\\]))([_`*~])(.*?[^\\\\])\\2(?![A-Za-z0-9])(.*)/, '$1$3$4'); // style characters at edges regardless of content\n  if (newString !== string) {\n    return removeStyleCharacters(newString);\n  } else {\n    return string;\n  }\n}\n\nmodule.exports = removeStyleCharacters;\n","let removeStyleCharacters = require('./remove_style_characters');\nrequire('css.escape');\n\nclass Topic {\n  // There are several permutations of the topic key\n\n  constructor(string) {\n    if (!string) throw new Error('String required to instantiate Topic');\n\n    this.display = string; // the string precisely as it appears in the expl file\n\n    this.mixedCase = removeStyleCharacters(string)  // the display verison sans style characters * _ ~ ` and a trailing question mark, encoding style characters\n      .split(/\\\\\\\\/g).map(string => string.replace(/\\\\/g, '')).join('\\\\\\\\'); // Remove backslashes that are escaping literal characters now that removeStyleCharacters has already run\n\n    this.cssMixedCase = CSS.escape(this.mixedCase);\n\n    this.escapedMixedCase = this.mixedCase\n      .replace(/#/g, '\\\\#')\n      .replace(/\\//g, '\\\\/')\n      .replace(/\\\\/g, '\\\\\\\\')\n\n    this.slug = this.mixedCase // This string encodes characters that will cause problems in the URL, but we do not encode all characters eg quotation marks. Must be reversable.\n      .replace(/%/g, '%25') // This way you can't have collisions if the user names something with a % which we're using for encodings\n      .replace(/\\\\\\\\/g, '%5C%5C') // a double backslash represents a literal backslash not an escape character\n      .replace(/`/g, '%60') // Chrome automatically replaces in URL and could be misinterpreted on the command line as subshell\n      .replace(/_/g, '%5C_') // Literal style characters are escaped so that when we parse the URL, we don't remove them with removeStyleCharacters\n      .replace(/ /g, '_') // This must be done after literal underscores have received encoded backslashes above to distinguish between them and these\n      .replace(/\\//g, '%2F')\n      .replace(/([.,])(?=[\"'')}\\]]+$)/g, ''); // Allow links to contain terminal periods or commas eg he went to [[\"Spain.\"]]\n\n    this.url = this.slug\n      .replace(/#/g, '%23')\n\n    this.fileName = this.slug // This string encodes characters that will cause problems in the URL, but we do not encode all characters eg quotation marks. Must be reversable.\n      .replace(/\"/g, '%22')\n      .replace(/'/g, '%27')\n      .replace(/,/g, '%2C')\n      .replace(/:/g, '%3A')\n      .replace(/</g, '%3C')\n      .replace(/>/g, '%3E')\n      .replace(/\\|/g, '%7C')\n      .replace(/\\*/g, '%2A')\n      .replace(/\\?/g, '%3F');\n\n    this.caps = this.mixedCase // This is the string that is used to find matches between links and topic names.\n      .toUpperCase() // We want matches to be case-insensitive\n      .replace(/\\?$/, '') // It should match whether or not both have trailing question marks\n      .replace(/[\"']/g, '') // We remove quotation marks so matches ignore them\n      .replace(/\\(/g, '') // we remove parentheses to allow link texts to contain optional parentheses\n      .replace(/\\)/g, '')\n      .replace(/ +/g, ' ') // consolidate spaces\n      .replace(/&NBSP;/g, ' ')\n      .trim() // remove initial and leading space, eg when using interpolation syntax: [[{|display only} actual topic name]]\n\n    this.requestFileName = encodeURIComponent(this.fileName); // This is the string that will be used to _request_ the file name on disk, so it needs to be encoded\n  }\n\n  static fromMixedCase(string) {\n    string = string.replace(/([`_~*])/g, '\\\\$1'); // In mixed case style character literals are unescaped, so we escape them to avoid double-processing\n    let topic = new Topic(string);\n    topic.display = null; // If a topic instance was instantiated from the mixed-case string, the display version is irretrievable\n    return topic;\n  }\n\n  static fromEncodedSlug(string) {\n    string = convertUnderscoresToSpaces(string);\n    string = decodeURIComponent(string);\n    string = string\n      .replace(/\\*/g, '\\\\*') // underscores are escaped in the URL itself, but for the other style characters we must escape them so that\n      .replace(/`/g, '\\\\`')  // they don't get stripped by removeStyleCharacters\n      .replace(/~/g, '\\\\~');\n\n    let topic = new Topic(string); // Encoded style characters decode to escaped style characters, so we can use the regular\n                                   // \"display -> mixed case\" processing step, even though this isn't the display string\n    topic.display = null; // The encoded slug was formed from the lossy mixed case version, so that is the best we can reconstruct from it\n    return topic;\n  }\n}\n\nTopic.convertUnderscoresToSpaces = function convertUnderscoresToSpaces(string) {\n  // We want to turn underscores into spaces, but not escaped underscores ie %5C_, but yes escaped escaped underscores ie %5C%5C_\n  return string.split(/%5C%5C/g) // first remove double backslashes to avoid seeing %5C%5C_ as an underscore literal instead of backslash literal followed by a space\n    .map(string => string\n      .split(/%5C_/g) // now remove escaped backslashes to avoid seeing them as spaces converted to underscores\n      .map(string => string.replace(/_/g, ' '))\n      .join('%5C_') //convert underscores not preceded by single %5C to spaces\n    ).join('%5C%5C');\n}\n\nTopic.convertSpacesToUnderscores = function convertSpacesToUnderscores(string) {\n  return string.split('/').map(string => Topic.for(string).fileName).join('/');\n}\n\nTopic.for = function topicFor(string) {\n  return new Topic(string);\n}\n\nfunction convertUnderscoresToSpaces(string) {\n  // We want to turn underscores into spaces, but not escaped underscores ie %5C_, but yes escaped escaped underscores ie %5C%5C_\n  return string.split(/%5C%5C/g) // first remove double backslashes to avoid seeing %5C%5C_ as an underscore literal\n    .map(string => string\n      .split(/%5C_/g) // now remove escaped backslashes to avoid seeing them as spaces converted to underscores\n      .map(string => string.replace(/_/g, ' '))\n      .join('%5C_') //convert underscores not preceded by single %5C to spaces\n    ).join('%5C%5C');\n}\n\nmodule.exports = Topic;\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport updateView from 'display/update_view';\nimport {\n  setHeader,\n  tryPathPrefix,\n  resetDom,\n  scrollPage,\n  animatePathChange\n} from 'display/helpers';\n\nimport { canopyContainer } from 'helpers/getters';\n\nfunction displayPath(pathToDisplay, linkToSelect, options = {}) {\n  if (!linkToSelect) linkToSelect = pathToDisplay.paragraph?.parentLink; // always select link?\n  if (Path.shouldAnimate(pathToDisplay, linkToSelect, options)) return animatePathChange(pathToDisplay, linkToSelect, options);\n  if (linkToSelect && !pathToDisplay.includes(linkToSelect.enclosingPath)) throw 'linkToSelect argument is not on given pathToDisplay';\n  if (!pathToDisplay.paragraph) return tryPathPrefix(pathToDisplay, options);\n  try { linkToSelect?.element } catch { return updateView(pathToDisplay, null, options); }\n  if (linkToSelect?.isCycle) updateView(linkToSelect.inlinePath, null, {renderOnly: true}); // invisibly render child paragraphs\n\n  Path.setPath(linkToSelect?.urlPath || pathToDisplay, options); // must be done before link.select because selection cache is by current URL\n  Link.updateSelectionClass(linkToSelect); // if null, removes previous selection's class\n  Link.persistSelection(linkToSelect); // if null, persists deselect\n  if (options.noDisplay) return;\n\n  resetDom();\n  let header = setHeader(pathToDisplay.rootTopicPath.topic, options);\n\n  let visibleParagraphs = displayPathTo(pathToDisplay.paragraph, [], options);\n  pathToDisplay.paragraph.addSelectionClass();\n  setTimeout(() => visibleParagraphs.forEach(paragraph => paragraph.display()) || header.show());\n  return options.noScroll ? Promise.resolve() : scrollPage(linkToSelect, options);\n};\n\nconst displayPathTo = (paragraph, visibleParagraphs, options) => {\n  options.scrollStyle === 'instant' ? paragraph.allocateSpace() : paragraph.display(); // scroll to correct location before showing content\n  visibleParagraphs.push(paragraph);\n  if (paragraph.isroot) return visibleParagraphs;\n  if (paragraph.parentLink) { paragraph.parentLink?.open(); Link.persistLastLinkSelection(paragraph.parentLink); } // remember open links of path reference\n  Link.persistLastLinkSelection(paragraph.parentLink); // being an open link makes that link the most recently selected for its paragraph\n  return displayPathTo(paragraph.parentParagraph, visibleParagraphs, options);\n}\n\nexport default displayPath;\n","import { canopyContainer } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport displayPath from 'display/display_path';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport updateView from 'display/update_view';\nimport renderTokenElement from 'render/render_token_element';\nimport fetchAndRenderPath from 'render/fetch_and_render_path';\n\nfunction setHeader(topic, displayOptions) {\n  let headerDomElement = document.querySelector(`h1[data-topic-name=\"${topic.cssMixedCase}\"]`);\n  headerDomElement.style.display = 'block';\n  headerDomElement.style.opacity = '0%';\n  if (displayOptions.scrollStyle !== 'instant') {\n    headerDomElement.style.opacity = '100%'; // the page is scrolled to the right position so there wont be a jump\n  }\n  return { show: () => { headerDomElement.style.opacity = '100%' } };\n}\n\nfunction hideAllSectionElements() {\n  Array.from(document.getElementsByTagName(\"section\")).forEach((sectionElement) => {\n    sectionElement.style.display = 'none';\n  });\n}\n\nfunction closeAllLinks() { // now selection class management is done in Link.updateSelectionClass\n  Array.from(document.getElementsByTagName(\"a\")).forEach((linkElement) => {\n    linkElement.classList.remove('canopy-open-link'); // now\n  });\n}\n\nfunction deselectSectionElement() {\n  Array.from(document.querySelectorAll('.canopy-selected-section')).forEach((sectionElement) => {\n    sectionElement.classList.remove('canopy-selected-section');\n  });\n}\n\nfunction removeScrollCompleteClass() {\n  Array.from(document.querySelectorAll('.canopy-scroll-complete')).forEach((sectionElement) => {\n    sectionElement.classList.remove('canopy-scroll-complete');\n  });\n}\n\nfunction hideHeaders() {\n  Array.from(document.querySelectorAll('#_canopy h1')).forEach(header => {\n    header.style.display = 'none';\n  });\n}\n\nfunction tryPathPrefix(path, displayOptions) {\n  console.error(\"No section element found for path: \", path.string);\n  if (path.length > 1) {\n    console.log(\"Trying: \", path.withoutLastSegment.string);\n    return displayPath(path.withoutLastSegment, null, {scrollStyle: 'instant'});\n  } else if(!displayOptions.defaultRedirect) {\n    console.error(\"No path prefixes remain to try. Redirecting to default topic: \" + Path.default);\n    return updateView(Path.default, null, { defaultRedirect: true, scrollStyle: 'instant' });\n  } else {\n    throw new Error('Redirect to default topic failed terminally.')\n  }\n}\n\nconst resetDom = () => {\n  hideHeaders();\n  closeAllLinks();\n  hideAllSectionElements();\n  deselectSectionElement();\n  removeScrollCompleteClass();\n}\n\nfunction scrollPage(link, options) {\n  options = options || {};\n  let behavior = options.scrollStyle || 'smooth';\n  let { scrollToParagraph, direction } = options;\n  canopyContainer.dataset.imageLoadScrollBehavior = behavior; // if images later load, follow the most recent scroll behavior\n  canopyContainer.dataset.initialLoad = options.initialLoad;\n\n  if (!link) return scrollElementToPosition(Paragraph.root.paragraphElement, {targetRatio: 0.5, maxScrollRatio: Infinity, behavior, side: 'top' });\n  let maxScrollRatio = behavior === 'instant' || scrollToParagraph || options.scrollDirect ? Infinity : 0.75; // no limit on initial load and click\n  let minDiff = 75; //(maxScrollRatio === Infinity) ? null : 75;\n\n  if (scrollToParagraph) {\n    return scrollElementToPosition(link.childParagraph.paragraphElement,\n      {targetRatio: 0.3, maxScrollRatio, minDiff, behavior, side: 'top', direction}); // up on root needs direction\n  } else { // scroll to link\n    const linkElement = link?.element;\n    if (linkElement) {\n      return scrollElementToPosition(linkElement, {targetRatio: 0.3, maxScrollRatio, minDiff, behavior, direction});\n    } else { // root paragraph\n      return scrollElementToPosition(Paragraph.current.sectionElement, {targetRatio: 0, maxScrollRatio, minDiff, behavior, direction});\n    }\n  }\n}\n\nfunction scrollElementToPosition(element, options) {\n  if (!(element instanceof Element)) throw new Error('Argument to scrollElementToPosition must be DOM element');\n  let { targetRatio, maxScrollRatio, minDiff, direction, behavior, side } = options;\n\n  let elementRect = element.getBoundingClientRect();\n  let idealTargetPositionOnVisibleContainer = ScrollableContainer.visibleHeight * targetRatio;\n\n  let containerPointToPutAtTarget;\n  if (side === 'bottom') {\n    containerPointToPutAtTarget = elementRect.bottom - ScrollableContainer.top + ScrollableContainer.currentScroll;\n  } else if (side === 'top') {\n    containerPointToPutAtTarget = elementRect.top - ScrollableContainer.top + ScrollableContainer.currentScroll;\n  } else {\n    side = 'middle';\n    containerPointToPutAtTarget = (elementRect.top - ScrollableContainer.top + ScrollableContainer.currentScroll) + (elementRect.height / 2);\n  }\n\n  // Handling large A tags\n  if (element.tagName === 'A' && (side === 'middle' || side === 'bottom')) {\n    const padding = 20; // minimum space between top of link and top of screen\n    const topOffScreen = (side === 'bottom' ? 1 : .5) * (elementRect.bottom - elementRect.top) + padding > idealTargetPositionOnVisibleContainer;\n    if (topOffScreen) {\n      targetRatio = 0.05;\n      idealTargetPositionOnVisibleContainer = ScrollableContainer.visibleHeight * targetRatio;\n      containerPointToPutAtTarget = elementRect.top + ScrollableContainer.currentScroll;\n    }\n  }\n\n  // if (element.tagName === 'P') { // try not to put parent link out of view\n  //   let parentLinkElement = Paragraph.for(element.closest('.canopy-section')).parentLink?.element;\n\n  //   if (parentLinkElement) {\n  //     const parentLinkRect = parentLinkElement.getBoundingClientRect();\n  //     const containerTargetRelativeToViewport = containerPointToPutAtTarget - ScrollableContainer.currentScroll;\n  //     const parentLinkTopWithinContainer = parentLinkRect.top - ScrollableContainer.top;\n  //     const distanceBetweenLinkAndParagraph = containerPointToPutAtTarget - parentLinkTopWithinContainer - ScrollableContainer.currentScroll;\n  //     const linkFocusPutsParagraphInLowerHalf = distanceBetweenLinkAndParagraph > ScrollableContainer.visibleHeight / 2;\n\n  //     // Check if the parent link goes above the top of the viewport\n  //     if (idealTargetPositionOnVisibleContainer < distanceBetweenLinkAndParagraph && !linkFocusPutsParagraphInLowerHalf) { // link will be off screen\n  //       targetRatio = 0.1;\n  //       idealTargetPositionOnVisibleContainer = ScrollableContainer.visibleHeight * targetRatio;\n  //       containerPointToPutAtTarget = parentLinkRect.top + ScrollableContainer.currentScroll; // change goal to putting link near top\n  //     }\n  //   }\n  // }\n\n  let idealScrollY = containerPointToPutAtTarget - idealTargetPositionOnVisibleContainer;\n\n  // Adjust idealScrollY to the closest possible scroll position\n  if (ScrollableContainer.innerHeight - ScrollableContainer.visibleHeight < idealScrollY) console.error('Scrollable area not long enough to scroll to desired position');\n  idealScrollY = Math.max(0, Math.min(idealScrollY, ScrollableContainer.innerHeight - ScrollableContainer.visibleHeight));\n\n  // Use the calculated scroll or max scroll if it is too big\n  const maxScrollDistance = maxScrollRatio ? ScrollableContainer.visibleHeight * maxScrollRatio : Infinity;\n  let actualScrollY;\n  if (idealScrollY > ScrollableContainer.currentScroll) {\n    actualScrollY = Math.min(idealScrollY, ScrollableContainer.currentScroll + maxScrollDistance);\n  } else {\n    actualScrollY = Math.max(idealScrollY, ScrollableContainer.currentScroll - maxScrollDistance);\n  }\n\n  let shouldScroll = idealScrollY - ScrollableContainer.currentScroll !== 0;\n\n  // Check that the scroll is larger than the minimum we would initiate a scroll for\n  if (minDiff) { // && maxScrollRatio !== Infinity) {\n    const diff = Math.abs(ScrollableContainer.currentScroll - actualScrollY);\n    let linkOffScreen = element.tagName === 'A' && (elementRect.top < 5 || elementRect.bottom > ScrollableContainer.visibleHeight);\n    shouldScroll = !minDiff || (minDiff && (diff > minDiff)) || linkOffScreen;\n  }\n\n  // If the caller has constrained the scroll in a single direction, check we're going that way\n  if (direction === 'up') {\n    shouldScroll = shouldScroll && actualScrollY < ScrollableContainer.currentScroll;\n  }\n\n  if (direction === 'down') {\n    shouldScroll = shouldScroll && actualScrollY > ScrollableContainer.currentScroll;\n  }\n\n  if (shouldScroll) {\n    return scrollToWithPromise({ top: actualScrollY, behavior, ...options });\n  } else {\n    return Promise.resolve(true);\n  }\n}\n\nfunction placeLineAt(y, color) {\n  // Create a new div element to represent the line\n  const line = document.createElement('div');\n\n  // Apply CSS styles to make the div a horizontal line at position y\n  line.style.position = 'absolute';\n  line.style.left = '0';\n  line.style.width = '100%';\n  line.style.height = '2px'; // Line thickness\n  line.style.backgroundColor = color; // Line color\n  line.style.top = `${y}px`;\n\n  // Append the line to the body of the document\n  ScrollableContainer.element.appendChild(line);\n}\n\nlet scrollInProgress = null;\nfunction getScrollInProgress() {\n  return scrollInProgress;\n}\n\nlet currentScrollOptions = null; // multiple calls to scrollToWithPromise replace the desired destination\n\nfunction scrollToWithPromise(options) {\n  currentScrollOptions = options;\n  return (scrollInProgress = new Promise(async function(resolve, reject) {\n    ScrollableContainer.scrollTo(currentScrollOptions);\n    let startTime = Date.now();\n    let lastY = ScrollableContainer.currentScroll;\n    let inactivityStart = null;\n    let checks = 0;\n\n    const checkScroll = () => {\n      const currentY = ScrollableContainer.currentScroll;\n      if (lastY === currentY && !inactivityStart) inactivityStart = Date.now();\n      if (lastY !== currentY) inactivityStart = null;\n      if (lastY === currentY && checks < 1) {\n        ScrollableContainer.scrollTo(currentScrollOptions);\n      }\n\n      lastY = currentY;\n      checks++;\n\n      if (inactivityStart && (Date.now() - inactivityStart > 1000)) {\n        scrollInProgress = null;\n        return resolve(false); // the user prevented the scroll from completing\n      }\n\n      if (Math.abs(currentY - options.top) < 10) {\n        scrollInProgress = null;\n        resolve(true); // Resolve the promise when close to the target\n      } else {\n        setTimeout(checkScroll, 50); // Recheck after 50 milliseconds\n      }\n    };\n\n    setTimeout(checkScroll, 50); // Start checking after 50 milliseconds\n  }));\n}\n\nfunction animatePathChange(newPath, linkToSelect, options = {}) {\n  // We do not want the content the user is looking at to appear or disappear.\n  // Case #1: If we are animating upward motion, we want to move up first, then remove lower content.\n  // Case #2: If we are animating downward motion, we want to add lower content, then scroll to that content, which is done in scrollPage\n  // Case #3: Upward followed by downward motion, so we do #1 followed by #2 (below)\n\n  let previousPath = Link.selection?.effectivePathReference ? Link.selection.enclosingPath : Path.rendered;\n  let overlapPath = previousPath.overlap(newPath);\n  let strictlyUpward = newPath.subsetOf(previousPath);\n  let targetElement = linkToSelect?.element || overlapPath.parentLink?.element || overlapPath.paragraph?.paragraphElement;\n\n  let minDiff = options.noMinDiff ? null : 75;\n  let firstTargetRatio = strictlyUpward ? 0.3 : 0.1; // when making second stop, we go higher\n\n  return (!elementIsFocused(targetElement) ? (scrollElementToPosition(targetElement,\n      {targetRatio: firstTargetRatio, maxScrollRatio: Infinity, minDiff, behavior: 'smooth', side: 'top' }\n    ).then(() => new Promise(resolve => setTimeout(resolve, 110)))) : Promise.resolve())\n    .then(() => linkToSelect?.select({noScroll: true, noAnimate: true, ...options}) || newPath.display({noScroll: true, noAnimate: true, ...options}))\n    .then(() => !strictlyUpward && new Promise(resolve => setTimeout(resolve, 150)))\n    .then(() => !strictlyUpward && !elementIsFocused(newPath.paragraph.paragraphElement) && scrollElementToPosition( // if new path is not subset, we continue down new path\n      newPath.paragraph.paragraphElement,\n      {targetRatio: 0.15, maxScrollRatio: Infinity, minDiff, behavior: 'smooth', side: 'top' })\n    );\n}\n\nfunction elementIsFocused(element) {\n  const rect = element.getBoundingClientRect(); // Get the bounding rectangle of the element\n\n  // Define the viewport range for the element to be considered \"focused\"\n  const upperViewportLimit = ScrollableContainer.visibleHeight * 0.3; // Element's bottom must be lower than this to be considered \"focused\"\n  const lowerViewportLimit = ScrollableContainer.visibleHeight * 0.4; // Element's top must be higher than this to be considered \"focused\"\n\n  // Check if the element's bottom is below the upper limit of the viewport range\n  const isBelowUpperLimit = rect.bottom > upperViewportLimit;\n  // Check if the element's top is above the lower limit of the viewport range\n  const isAboveLowerLimit = rect.top < lowerViewportLimit;\n\n  // The element is considered \"focused\" if it's both below the upper limit and above the lower limit\n  return isBelowUpperLimit && isAboveLowerLimit && rect.top > 0;\n}\n\nexport {\n  setHeader,\n  resetDom,\n  tryPathPrefix,\n  scrollPage,\n  scrollElementToPosition,\n  animatePathChange,\n  scrollToWithPromise,\n  getScrollInProgress\n};\n","import fetchAndRenderPath from 'render/fetch_and_render_path';\nimport displayPath from 'display/display_path';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport { canopyContainer } from 'helpers/getters';\nlet lastPath = null;\n\nconst updateView = (pathToDisplay, linkToSelect, options = {}) => {\n  if (pathToDisplay.empty) pathToDisplay = Path.default;\n  if (!options.renderOnly && !options.noDisplay) document.title = pathToDisplay.lastTopic.mixedCase;\n\n  let renderComplete = (lastPath = !options.pending && pathToDisplay || lastPath) &&\n    fetchAndRenderPath(pathToDisplay, pathToDisplay, canopyContainer).catch(e => console.error(e));\n\n  Promise.race([\n    renderComplete,\n    (new Promise(resolve => setTimeout(resolve, 400)))\n  ]).then((success) => {\n    if (!success && linkToSelect && Paragraph.contentLoaded) {\n      linkToSelect?.addSelectionClass() || updateView(linkToSelect.enclosingPath, linkToSelect, { pending: true });\n    }\n  });\n\n  return renderComplete.then(() => {\n    if (!options?.renderOnly && pathToDisplay.equals(lastPath)) displayPath(\n      pathToDisplay,\n      linkToSelect,\n      options\n    );\n  }).catch(e => console.error(e));\n}\n\nexport default updateView;\n","import json from '../../package.json';\n\nlet canopyContainer = document.getElementById('_canopy');\n\ncanopyContainer.dataset.canopyVersion = json.version;\n\nlet defaultTopic = () => canopyContainer && canopyContainer.dataset.defaultTopic;\n\nlet projectPathPrefix = canopyContainer && canopyContainer.dataset.projectPathPrefix;\n\nlet hashUrls = canopyContainer && canopyContainer.dataset.hashUrls;\n\nexport {\n  canopyContainer,\n  defaultTopic,\n  projectPathPrefix,\n  hashUrls\n};\n","import { canopyContainer } from 'helpers/getters';\nimport Paragraph from 'models/paragraph';\n\nclass ScrollableContainer {\n  static get windowMode() {\n    return !isElementScrollable(canopyContainer.parentElement)\n  }\n\n  static get element() {\n    if (this.windowMode) return document.body;\n    if (!this.windowMode) return canopyContainer.parentElement;\n  }\n\n  static get visibleHeight() {\n    if (this.windowMode) return window.innerHeight;\n    if (!this.windowMode) return this.element.clientHeight;\n  }\n\n  static get innerHeight() {\n    if (this.windowMode) return document.documentElement.scrollHeight;\n    if (!this.windowMode) return this.element.scrollHeight;\n  }\n\n  static get currentScroll() {\n    if (this.windowMode) return window.scrollY;\n    if (!this.windowMode) return this.element.scrollTop;\n  }\n\n  static get top () {\n    if (this.windowMode) return 0;\n    return canopyContainer.parentElement.getBoundingClientRect().top;\n  }\n\n  static addEventListener(type, handler) {\n    if (this.windowMode) return window.addEventListener(type, handler);\n    if (!this.windowMode) return this.element.addEventListener(type, handler);\n  }\n\n  static scrollTo(options){\n    if (this.windowMode) return window.scrollTo(options);\n    if (!this.windowMode) return this.element.scrollTo(options);\n  }\n\n  static get focusGap() {\n    return ScrollableContainer.visibleHeight * 0.3;\n  }\n\n  static get focusY() {\n    return ScrollableContainer.visibleHeight * 0.3 + ScrollableContainer.currentScroll;\n  }\n\n  static get focusedElement() { // return the HTML element that should be used as a focus when image load events disrupt viewport\n    return Array.from(document.querySelectorAll('*'))\n      .filter(el => {\n        // Exclude non-visible elements\n        if (el.offsetWidth === 0 && el.offsetHeight === 0) return false;\n        if (el.closest('.canopy-image')) return false;\n\n        const rect = el.getBoundingClientRect();\n        // Check if element's bottom is within the viewport\n        return rect.bottom > 0 && rect.bottom <= this.visibleHeight;\n      })\n      .reduce((highest, el) => {\n        if (highest?.classList.contains('canopy-selected-link')) return highest; // selected link if visible is always the focus\n        if (el?.classList.contains('canopy-selected-link')) return el;\n\n        return !highest || el.getBoundingClientRect().bottom < highest.getBoundingClientRect().bottom ? el : highest;\n      }, null) || canopyContainer; // Initialize reduce with null\n  }\n}\n\nfunction isElementScrollable(element) {\n  const overflowY = window.getComputedStyle(element).overflowY;\n  const isOverflowScrollable = overflowY === 'scroll' || overflowY === 'auto';\n  const contentOverflows = element.scrollHeight > element.clientHeight;\n  return isOverflowScrollable && contentOverflows;\n}\n\nexport default ScrollableContainer;\n","import Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport Topic from '../../cli/shared/topic';\nimport updateView from 'display/update_view';\n\nclass Link {\n  constructor(argument) {\n    // There are three ways to instantiate a link object:\n    // 1. You can provide a DOM element\n    // 2. You can provide a metadata object\n    //   (This is helpful when storing link selection in the session or history)\n    // 3. You can provide a callback that returns the link\n    //   (This is helpful for selecting links that are not yet rendered)\n\n    if (argument?.tagName === 'A') {\n      this.element = argument;\n    } else if (argument instanceof Link) {\n      throw new Error(\"Cannot instantiate link from link\");\n    } else if (typeof argument === 'object') {\n      this.metadataObject = argument;\n    } else if (typeof argument === 'function') {\n      this.selectorCallback = argument;\n    } else {\n      throw new Error('Invalid argument to Link constructor');\n    }\n  }\n\n  equals(otherLink) {\n    return this.element === otherLink.element;\n  }\n\n  matches(otherLink) {\n    if (!otherLink) throw new Error('Invalid link argument to Link#matches');\n\n    return this.targetTopic === otherLink.targetTopic &&\n      this.targetSubtopic === otherLink.targetSubtopic &&\n      this.relativeLinkNumber === otherLink.relativeLinkNumber;\n  }\n\n  contradicts(otherPath) {\n    if (!(otherPath instanceof Path)) throw new Error('Invalid path argument to Link#contradicts');\n    return this.targetPath.string !== otherPath.string;\n  }\n\n  get element () {\n    if (this.linkElement) {\n      return this.linkElement\n    } else if (this.metadataObject) {\n      this.element = Link.elementFromMetadata(this.metadata);\n      if (!this.linkElement) throw new Error('Metadata refered to non-existant link');\n      return this.linkElement;\n    } else if (this.selectorCallback) {\n      let link = this.selectorCallback();\n      if (!link) throw new Error('Link selector callback provided no link');\n      this.element = link.element;\n      return this.linkElement;\n    }\n  }\n\n  set element(argument) {\n    if (argument instanceof HTMLAnchorElement) {\n      this.linkElement = argument;\n    } else if (argument instanceof Link) {\n      this.linkElement = argument.element;\n    }\n    this.transferDataset();\n  }\n\n  get top() {\n    return this.element.getBoundingClientRect().top;\n  }\n\n  get bottom() {\n    return this.element.getBoundingClientRect().bottom;\n  }\n\n  get innerText() {\n    return this.element.innerText;\n  }\n\n  transferDataset() {\n    // This is just to make it easier to inspect and debug DOM elements\n    // Getters are used instead of properties to allow lazy access for callback-specified links\n    if (!this.linkElement) return;\n    this._pathString = this.linkElement.dataset.pathString;\n    this._enclosingTopic = this.linkElement.dataset.enclosingTopic;\n    this._enclosingSubtopic = this.linkElement.dataset.enclosingSubtopic;\n    this._typeValue = this.linkElement.dataset.type;\n  }\n\n  get targetTopic() {\n    return this.literalPath.lastTopic;\n  }\n  get targetSubtopic() {\n    if (this.isLocal) return Topic.fromMixedCase(this.element.dataset.targetSubtopic);\n    return this.literalPath.lastSubtopic;\n  }\n\n  get childTopic() {\n    return this.literalPath.firstTopic;\n  }\n  get childSubtopic() {\n    if (this.isLocal) return Topic.fromMixedCase(this.element.dataset.targetSubtopic);\n    return this.literalPath.firstSubtopic;\n  }\n\n  get enclosingTopic() {\n    return Topic.fromMixedCase(this.element.dataset.enclosingTopic);\n  }\n\n  get enclosingTopicParagraph() {\n    return this.enclosingParagraph.topicParagraph;\n  }\n\n  get enclosingSubtopic() {\n    return Topic.fromMixedCase(this.element.dataset.enclosingSubtopic);\n  }\n\n  get topicName() {\n    throw new Error('Links have no topicName, only targetTopic or enclosingTopic');\n  }\n\n  get subtopicName() {\n    throw new Error('Links have no subtopicName, only targetSubtopic or enclosingSubtopic');\n  }\n\n  get type() {\n    return this.element.dataset.type;\n  }\n\n  get enclosingSectionElement() {\n    return this.element.parentNode.closest('.canopy-section');\n  }\n\n  get sectionElement() {\n    throw new Error(\"Depreciated in favor of #enclosingSectionElement\");\n  }\n\n  get enclosingParagraphElement() {\n    return this.element.parentNode.closest('.canopy-paragraph');\n  }\n\n  get parentParagraphElement() {\n    throw new Error(\"Depreciated in favor of #enclosingParagraphElement\");\n  }\n\n  get enclosingParagraph() {\n    return new Paragraph(this.enclosingSectionElement);\n  }\n\n  get enclosingPath() {\n    if (this.metadataObject && !Paragraph.contentLoaded) return new Path(this.metadataObject.enclosingPathString);\n    return this.enclosingParagraph.path;\n  }\n\n  get targetParagraph() { // if the link is to A/B/C, A is the child and C is the targetParagraph\n    if (!this.isParent) return null;\n\n    let pathDepth = this.enclosingParagraph.pathDepth;\n    if (this.isGlobal) pathDepth = Number(pathDepth) + 1;\n\n    let sectionElement = this.enclosingParagraph.sectionElement.querySelector(\n        `section[data-topic-name=\"${this.literalPath.firstTopic.cssMixedCase}\"]` +\n        `[data-subtopic-name=\"${this.literalPath.firstSubtopic.cssMixedCase}\"]` +\n        `[data-path-depth=\"${pathDepth}\"`\n      );\n\n    if (!sectionElement) {\n      if (this.cycle) return null; // the paragraph doesn't exist because we didn't preview it\n      console.log(`Did not find paragraph child element matching link [${this.literalPath.firstTopic.mixedCase}, ${this.literalPath.firstSubtopic.mixedCase}]`); // could be network issues\n      return null;\n    }\n\n    return new Paragraph(sectionElement);\n  }\n\n  get childPath() {\n    return this.childParagraph.path;\n  }\n\n  get childParagraph() {\n    if (this.isLocal) return this.targetParagraph;\n    if (this.isGlobal) return this.enclosingPath.append(this.literalPath.firstTopicPath).paragraph;\n    return null;\n  }\n\n  get matcher() {\n    return (link) => link.matches(this);\n  }\n\n  get relativeLinkNumber() {\n    if (this.storedRelativeLinkNumber) return this.storedRelativeLinkNumber;\n    this.storedRelativeLinkNumber = this.\n      enclosingParagraph.\n      links.\n      map(e => e.element).\n      indexOf(this.element);\n\n    return this.storedRelativeLinkNumber;\n  }\n\n  get metadata() {\n    if (this.metadataObject) {\n      if (this?.linkElement) return Link.collectMetadata(this.linkElement); // rewrite in case format changed\n      return this.metadataObject;\n    } else if(this.linkElement) {\n      let metadata = Link.collectMetadata(this.linkElement);\n      this.metadataObject = metadata;\n      return metadata;\n    } else if (this.selectorCallback) {\n      this.element = this.selectorCallback();\n      return this.metadata; // now that there is a this.linkElement\n    } else {\n      throw new Error(\"Link has neither supplied metadata, dom element, nor selector function\");\n    }\n  }\n\n  get path() {\n    debugger;\n    throw '#path is deprecated in favor of #inlinePath or #literalPath';\n  }\n\n  get targetPath() { // links are assumed to be inlined unless the user redirects explicitly\n    throw '#targetPath is deprecated in favor of #inlinePath or #literalPath';\n  }\n\n  get literalPath() {\n    if (this.isLocal) return Path.forSegment(this.enclosingTopic, this.targetSubtopic);\n    if (this.isGlobal) return Path.for(this.element.dataset.pathString); // this will have to change for path links which can have multiple segments\n    return null;\n  }\n\n  static collectMetadata(linkElement) {\n    let link = new Link(linkElement);\n    let paragraph = Paragraph.containingLink(link);\n\n    // changing the metadata schema requires changing Link#containsLinkSelectionMetadata\n    return {\n      enclosingPathString: link.enclosingPath.string,\n      text: linkElement.dataset.text,\n      relativeLinkNumber: link.relativeLinkNumber,\n      previewPathString: link.previewPath.string // on initial page load we need the paragraph path to call updateView before we have a link to use\n    };\n  }\n\n  static containsLinkSelectionMetadata(object) {\n    return object.relativeLinkNumber !== undefined;\n  }\n\n  static elementFromMetadata(object) {\n    let enclosingPath = new Path(object.enclosingPathString);\n    let enclosingParagraph = enclosingPath.paragraph;\n    if (!enclosingParagraph) throw new Error(\"Link selection data refers to non-existant link\");\n    let link = enclosingParagraph.linkBySelector(\n      (link, i) => link.element.dataset.text === object.text &&\n        i === object.relativeLinkNumber\n    );\n\n    return link && link.element || null;\n  }\n\n  get nextSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[links.length - 1])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink + 1];\n    } else {\n      return null;\n    }\n  }\n\n  get previousSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[0])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink - 1];\n    } else {\n      return null;\n    }\n  }\n\n  get siblings() {\n    return this.enclosingParagraph.links;\n  }\n\n  get firstSibling() {\n    return this.siblings[0];\n  }\n\n  get lastSibling() {\n    return this.siblings[this.siblings.length - 1];\n  }\n\n  get firstChildLink() {\n    return this.targetParagraph.firstLink;\n  }\n\n  get lastChildLink() {\n    return this.targetParagraph.lastLink;\n  }\n\n  siblingOf(link) {\n    return this.enclosingParagraph && this.enclosingParagraph.equals(link?.enclosingParagraph);\n  }\n\n  get parentLink() {\n    return this.enclosingParagraph.parentLink;\n  }\n\n  isParentLinkOf(paragraph) {\n    return paragraph?.parentLink?.equals(this);\n  }\n\n  get grandParentLink() {\n    return this.parentLink?.parentLink;\n  }\n\n  get topicParagraph() {\n    return new Paragraph(this.element.parentNode.closest('.canopy-topic-section'));\n  }\n\n  get selected() {\n    return this.element.classList.includes('canopy-selected-link');\n  }\n\n  open() {\n    this.element.classList.add('canopy-open-link');\n  }\n\n  get isOpen() {\n    return this.element.classList.contains('canopy-open-link');\n  }\n\n  get isClosed() {\n    return !this.isOpen;\n  }\n\n  get isClosedCycle() {\n    return !this.isOpen && this.cycle;\n  }\n\n  get isSelected() {\n    return this.element.classList.contains('canopy-selected-link');\n  }\n\n  get isGlobal() {\n    return this.type === 'global';\n  }\n\n  get isPathReference() {\n    return this.type === 'global' && (this.literalPath.length > 1 || this.childTopic.mixedCase !== this.childSubtopic.mixedCase);\n  }\n\n  get isSimpleGlobal() {\n    return this.isGlobal && !this.isPathReference; // a global reference to a single global topic\n  }\n\n  get effectivePathReference() { // a path reference which is not a cycle unless the cycle is open and thus functioning as a path reference\n    return this.isPathReference && (!this.cycle || this.inlinedCycleReference);\n  }\n\n  get inlinedCycleReference() { // a cycle reference that has been inlined\n    return this.introducesNewCycle && this.isOpen;\n  }\n\n  get isInDom() {\n    return !!this.element.closest('div#_canopy');\n  }\n\n  get isExternal() {\n    return this.type === 'external';\n  }\n\n  get isGlobal() {\n    return this.type === 'global';\n  }\n\n  get isLocal() {\n    return this.type === 'local';\n  }\n\n  get isCycle() {\n    return this.introducesNewCycle;\n  }\n\n  get isBackCycle() {\n    return this.inlinePath.reduce().subsetOf(this.inlinePath);\n  }\n\n  get isLateralCycle() {\n    return this.cycle && !this.inlinePath.reduce().subsetOf(this.inlinePath);\n  }\n\n  get isParent() {\n    return this.isGlobal || this.isLocal;\n  }\n\n  isSiblingOf(otherLink) {\n    return this.enclosingParagraph.equals(otherLink.enclosingParagraph);\n  }\n\n  get hasChildren() {\n    return this.childParagraph?.hasLinks;\n  }\n\n  get firstChild() {\n    return this.childParagraph?.firstLink;\n  }\n\n  firstChildOf(otherLink) {\n    return !!otherLink.firstChild?.equals(this);\n  }\n\n  get isOffScreen() {\n    const rect = this.element.getBoundingClientRect();\n    const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n\n    return (\n      rect.top < 0 || // The top edge of the element is above the viewport's top\n      rect.bottom > viewportHeight // The bottom edge of the element is below the viewport's bottom\n    );\n  }\n\n  isVisible() {\n    if (!this.element) return false;\n    let rect = this.element.getBoundingClientRect();\n    let windowHeight = window.innerHeight;\n    let windowWidth = window.innerWidth;\n\n    let visibleWidth = Math.min(rect.right, windowWidth) - Math.max(rect.left, 0);\n    let visibleHeight = Math.min(rect.bottom, windowHeight) - Math.max(rect.top, 0);\n\n    let totalArea = (rect.bottom - rect.top) * (rect.right - rect.left);\n    let visibleArea = visibleHeight * visibleWidth;\n\n    return (visibleArea / totalArea) >= 0.5;\n  }\n\n  isAboveViewport() {\n    if (!this.element || !this.element.getBoundingClientRect) {\n      return false;\n    }\n\n    const rect = this.element.getBoundingClientRect();\n    return rect.top < 0;\n  }\n\n  isBelowViewport() {\n    if (!this.element || !this.element.getBoundingClientRect) {\n      return false;\n    }\n\n    const rect = this.element.getBoundingClientRect();\n    const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n    return rect.bottom > viewportHeight;\n  }\n\n  isDistantParent() {\n    return this.top + ScrollableContainer.visibleHeight * 0.5 < this.childParagraph.top;\n  }\n\n  isHigherThan(otherLink) {\n    return this.top < otherLink.top;\n  }\n\n  get isFocused() {\n    const rect = this.element.getBoundingClientRect();\n\n    // Get the viewport height\n    const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n\n    // Calculate the top 25% and bottom 40% positions of the viewport\n    const topLimit = viewportHeight * 0.25;\n    const bottomLimit = viewportHeight * 0.6;\n\n    // Check if the element is within the target area\n    const overlapsTop = rect.bottom > topLimit;\n    const overlapsBottom = rect.top < bottomLimit;\n\n    return overlapsTop && overlapsBottom;\n  }\n\n  get cycle() {\n    return this.introducesNewCycle;\n  }\n\n  get introducesNewCycle() {\n    if (!this.isGlobal) return false;\n    return Path.introducesNewCycle(this.enclosingPath, this.literalPath);\n  }\n\n  get inlinePath() { // ie if the user would inline the link's target at the link's enclosing path\n    if (this.isGlobal) {\n      return this.enclosingParagraph.path.append(this.literalPath);\n    }\n\n    if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    }\n\n    return this.enclosingParagraph.path;\n  }\n\n  get previewPath() {\n    if (this.metadataObject && !Paragraph.contentLoaded) { // for initial page load before links exist\n      return new Path(this.metadataObject.previewPathString);\n    }\n\n    if (this.isExternal) { // select the link and display enclosing path\n      return this.enclosingPath;\n    }\n\n    if (this.isGlobal && this.introducesNewCycle && !this.inlinedCycleReference) { // select the link and display enclosing path\n      return this.enclosingPath;\n    }\n\n    if (this.isGlobal) { // select link and advance the path\n      return this.inlinePath;\n    }\n\n    if (this.isLocal) { // select link and advance the path\n      return this.inlinePath;\n    }\n  }\n\n  get urlPath() {\n    if (this.cycle || this.isPathReference || this.externalLink) return this.enclosingPath;\n    if (this.isLocal || this.isSimpleGlobal) return this.inlinePath;\n  }\n\n  select(options = {}) {\n    if (options?.newTab && this.isParent && options.redirect) return window.open(location.origin + this.literalPath.productionPathString, '_blank');\n    if (options?.newTab && this.isParent) return window.open(location.origin + this.previewPath.productionPathString, '_blank');\n\n    return updateView(this.previewPath, this, options);\n  }\n\n  execute(options = {}) {\n    options = { scrollDirect: true, ...options };\n\n    Link.persistLastLinkSelection(this); // even if another link gets selected, this link was last touched within paragraph\n\n    if (this.isExternal) {\n      return window.open(this.element.href, '_blank'); // external links must open in new tab\n    }\n\n    if (options.redirect) { // all handling is the same for redirection\n      return this.literalPath.display({ scrollStyle: 'instant', ...options}); // handles new tab\n    }\n\n    if (this.isGlobal && this.introducesNewCycle && !options.inlineCycles) {\n      return (options.pushHistoryState ? this.select({ noScroll: true, noDisplay: true }) : Promise.resolve()) // persist clicked link in history\n        .then(() => this.inlinePath.reduce().display(options));\n    }\n\n    if ((this.isPathReference && !this.cycle) || (this.cycle && options.inlineCycles)) { // eg [[A#B]] or [[A/B/C]]\n      return (options.pushHistoryState ? this.select({ noScroll: true, noDisplay: true }) : Promise.resolve()) // persist clicked link in history\n        .then(() => this.inlinePath.display({ scrollDirect: true, ...options }));\n    }\n\n    return (options.selectALink && this.firstChild || this).select(options);\n  }\n\n  static removeSelectionClass() {\n    Array.from(document.getElementsByTagName(\"a\")).forEach((linkElement) => {\n      linkElement.classList.remove('canopy-selected-link');\n    });\n  }\n\n  addSelectionClass() {\n    Link.updateSelectionClass(this);\n  }\n\n  get onCurrentPage() {\n    const style = window.getComputedStyle(this.element);\n\n    return (\n      this.element.offsetWidth > 0 &&\n      this.element.offsetHeight > 0 &&\n      style.display !== 'none' &&\n      style.visibility !== 'hidden'\n    );\n  }\n\n  static deselect(newLink) {\n    Link.updateSelectionClass(newLink || null);\n  }\n\n  static updateSelectionClass(linkToSelect) {\n    if (this.lastSelection !== linkToSelect) this.lastSelection = Link.selection;\n    document.querySelector('a.canopy-selected-link')?.classList.remove('canopy-selected-link');\n    if (linkToSelect) linkToSelect.element.classList.add('canopy-selected-link');\n  }\n\n  static lastSelection = null;\n\n  static persistSelection(linkToSelect) {\n    Link.persistInHistory(linkToSelect);\n    Link.persistInSession(linkToSelect);\n    Link.persistLastLinkSelection(linkToSelect);\n  }\n\n  static selectionPresentInEvent(e) {\n    return e.state && Link.containsLinkSelectionMetadata(e.state);\n  }\n\n  static get sessionSelection() {\n    if (Path.url.empty) return null; // initial '/' load will never recall link selection\n\n    let sessionData = sessionStorage.getItem(Path.url.string);\n    if (sessionData && sessionData !== 'null') {\n      let link = new Link(JSON.parse(sessionData));\n      return link;\n    } else {\n      return null;\n    }\n  }\n\n  static get historySelection() {\n    if (Path.url.empty) return null; // initial '/' load will never recall link selection\n\n    if (history.state && Link.containsLinkSelectionMetadata(history.state)) {\n      let link = new Link(history.state);\n      return link;\n    } else {\n      return null;\n    }\n  }\n\n  static get savedSelection() {\n    return this.historySelection || this.sessionSelection || null;\n  }\n\n  static get selection() {\n    let selectedLink = document.querySelector('a.canopy-selected-link');\n    if (selectedLink) {\n      return new Link(selectedLink);\n    } else {\n      return null;\n    }\n  }\n\n  static persistInSession(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    let linkData = link && JSON.stringify(link.metadata);\n    sessionStorage.setItem(location.pathname + location.hash, linkData || null);\n  }\n\n  static persistInHistory(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    history.replaceState(\n      link && link.metadata || null,\n      document.title,\n      window.location.href\n    );\n  }\n\n  static current() {\n    throw new Error(\"Link#current does not exist, try Link#selection\");\n  }\n\n  // If someone eg presses up from the second link in a paragraph, pressing down should return them there.\n  static persistLastLinkSelection(link) {\n    if (link) {\n      let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n      lastSelectionsOfParagraph[link.enclosingParagraph.path] = link.metadata;\n      sessionStorage.setItem('lastSelectionsOfParagraph', JSON.stringify(lastSelectionsOfParagraph));\n    }\n  }\n\n  static lastSelectionOfParagraph(paragraph) {\n    let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n    if (lastSelectionsOfParagraph[paragraph.path]) {\n      let link = new Link(lastSelectionsOfParagraph[paragraph.path]);\n      try { // sometimes metadata from previous versions is stored and doesn't correspond to real links anymore\n        if (link.element) {\n          return link;\n        }\n      } catch {\n        return null;\n      }\n    }\n  }\n\n  get isLastSelection() {\n    return !!Link.lastSelectionOfParagraph(this.enclosingParagraph)?.equals(this);\n  }\n\n  static get visible() {\n    return Array.from(document.querySelectorAll('.canopy-selectable-link'))\n      .map(element => Link.for(element))\n      .filter(link => link.isVisible)\n  }\n\n  static for(arg) {\n    return new this(arg);\n  }\n\n  static from(arg) {\n    return new this(arg);\n  }\n}\n\nexport default Link;\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport { canopyContainer } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport Topic from '../../cli/shared/topic';\nimport updateView from 'display/update_view';\n\nclass Paragraph {\n  // A paragraph instance represents a visible paragraph, not\n  // specifically the DOM element of type paragraph.\n  //\n  // Visible paragraphs in the UI are created with a section element\n  // that has a paragraph element child.\n  //\n  // paragraph.sectionElement returns the section element, whereas\n  // paragraph.paragraphElement returns the paragraph element.\n\n  constructor(sectionElement) {\n    if (!sectionElement || sectionElement.tagName !== 'SECTION' ) throw new Error(\"Paragraph instantiation requires section element\");\n    if (!sectionElement.classList.contains('canopy-section')) throw new Error(\"Paragraph class requires Canopy section element\");\n    this.sectionElement = sectionElement;\n    this.transferDataset();\n  }\n\n  static from(sectionElement) {\n    return new this(sectionElement);\n  }\n\n  equals(otherParagraph) {\n    if (!otherParagraph) return false;\n    return this.sectionElement === otherParagraph.sectionElement;\n  }\n\n  allocateSpace() {\n    this.sectionElement.style.display = 'block';\n    this.sectionElement.style.opacity = '0%';\n  }\n\n  display() {\n    this.sectionElement.style.display = 'block';\n    this.sectionElement.style.opacity = '100%';\n  }\n\n  get element() {\n    throw new Error(\"Depreciated in favor of #sectionElement property\");\n  }\n\n  transferDataset() { // This is so we can more easily debug in the console\n    this._topicName = this.sectionElement.dataset.topicName;\n    this._subtopicName = this.sectionElement.dataset.subtopicName;\n    this.pathDepth = Number(this.sectionElement.dataset.pathDepth);\n  }\n\n  get topic () {\n    return Topic.fromMixedCase(this.sectionElement.dataset.topicName);\n  }\n\n  get subtopic () {\n    return Topic.fromMixedCase(this.sectionElement.dataset.subtopicName);\n  }\n\n  get topicName() {\n    throw new Error(\"Depreciated in favor of #topic\");\n  }\n\n  get subtopicName() {\n    throw new Error(\"Depreciated in favor of #subtopic\");\n  }\n\n  get paragraphElement() {\n    let paragraphElement = Array.from(this.sectionElement.childNodes).\n      find((element) => element.tagName === 'P');\n\n    if (!paragraphElement) throw new Error(\"Paragraph has no paragraph element\");\n    return paragraphElement;\n  }\n\n  get path() {\n    if (!this.isInDom) throw 'Cannot call Paragraph#path until paragraph is appended to DOM.';\n    let array = [];\n    let currentElement = this.sectionElement;\n    let currentParagraph = this;\n    let currentTopicParagraph = this.topicParagraph;\n\n    while (currentElement !== canopyContainer) {\n      currentTopicParagraph = currentParagraph.topicParagraph;\n\n      array.unshift([\n        Topic.fromMixedCase(currentElement.dataset.topicName),\n        Topic.fromMixedCase(currentElement.dataset.subtopicName)\n      ]);\n\n      while (currentElement !== canopyContainer && currentParagraph.topicParagraph.equals(currentTopicParagraph)) {\n        currentElement = currentElement.parentNode;\n        if (currentElement !== canopyContainer) currentParagraph = new Paragraph(currentElement);\n      }\n    }\n\n    return new Path(array);\n  }\n\n  get pathDown() { // path from the paragraph down the page\n    return this.path.slice(this.pathDepth);\n  }\n\n  get links() {\n    if (this.linkObjects) return this.linkObjects;\n    let linkElements = this.paragraphElement.querySelectorAll('a.canopy-selectable-link');\n    this.linkObjects = Array.from(linkElements).map((element) => new Link(element));\n    return this.linkObjects;\n  }\n\n  get linkElements() {\n    return Array.from(this.paragraphElement.querySelectorAll('.canopy-selectable-link'));\n  }\n\n  get firstLink() {\n    return this.links[0] || null;\n  }\n\n  nthLink(n) {\n    return this.links[n] || null;\n  }\n\n  get lastLink() {\n    return this.links[this.links.length - 1] || null;\n  }\n\n  get previousLink() {\n    return Link.lastSelectionOfParagraph(this);\n  }\n\n  get isroot() {\n    return this.sectionElement.parentNode === canopyContainer\n  }\n\n  get isSingleTopic() {\n    return this.topic.caps === this.subtopic.caps;\n  }\n\n  get hasLinks() {\n    return this.links.length > 0;\n  }\n\n  linkBySelector(callback) {\n    return this.links.find(callback);\n  }\n\n  linksBySelector(callback) {\n    return this.links.filter(callback);\n  }\n\n  linkByChild(givenTopic, givenSubtopic) {\n    return this.linkBySelector(\n      (link) =>\n        (link.isGlobal && link.childTopic.caps === givenTopic?.caps) ||\n        (link.isLocal && link.targetSubtopic.caps === givenSubtopic?.caps)\n    );\n  }\n\n  get parentLink() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    if (this.parentParagraph.linkElements.includes(Link.selection?.element) && Link.selection?.childParagraph?.equals(this)) {\n      return Link.selection; // when selected link is path reference and so is one of the open links also\n    }\n\n    // if paragraph is subtopic, parent link must be local reference in parent\n    if (!this.isTopic) {\n      return this.parentParagraph.links.find(link => link.isLocal && link.targetSubtopic.caps === this.subtopic.caps);\n    }\n\n    // if there are multiple global links beginning with the given topic, prefer the last selection\n    let lastSelectionOfParent = Link.lastSelectionOfParagraph(this.parentParagraph);\n    if (this.parentLinks.length > 1 && lastSelectionOfParent && this.parentLinks.find(l => l.equals(lastSelectionOfParent))) {\n      return lastSelectionOfParent;\n    }\n\n    // if one of the potential parents is a simple global reference, prefer that over a longer path\n    let simpleGlobalParent = this.parentParagraph && this.parentParagraph.links.find(\n      link => link.isGlobal &&\n        link.literalPath.length === 1 &&\n        link.childTopic.caps === this.topic.caps &&\n        link.childSubtopic.caps === this.topic.caps\n    );\n    if (simpleGlobalParent) return simpleGlobalParent;\n\n    // otherwise pick the first matching link\n    return this.parentParagraph && this.parentParagraph.links.find(\n      link => link.isGlobal && link.childTopic.caps === this.topic.caps\n    );\n  }\n\n  get parentLinks() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    return this.parentParagraph.linksBySelector(\n      (link) =>\n        (link.isGlobal && link.childTopic.caps === this.topic.caps) ||\n        (link.isLocal && link.targetSubtopic.caps === this.subtopic.caps)\n    );\n  }\n\n  get displayTopicName() {\n    return this.sectionElement.dataset.displayTopicName;\n  }\n\n  get parentParagraph() {\n    if (this.sectionElement) {\n      let parentElement = this.sectionElement.parentNode.closest('.canopy-section');\n      return parentElement ? new Paragraph(parentElement) : null;\n    } else {\n      return null;\n    }\n  }\n\n  get topicParagraph() {\n    if (this.isTopic) {\n      return this;\n    } else {\n      return new Paragraph(this.sectionElement.parentNode.closest('.canopy-topic-section'));\n    }\n  }\n\n  get isTopic() {\n    return this.topic.mixedCase === this.subtopic.mixedCase;\n  }\n\n  get isInDom() {\n    return !!this.sectionElement.closest('div#_canopy');\n  }\n\n  get top() {\n    return this.paragraphElement.getBoundingClientRect().top;\n  }\n\n  get bottom() {\n    return this.paragraphElement.getBoundingClientRect().bottom;\n  }\n\n  static get selection() {\n    return Paragraph.current;\n  }\n\n  static get current() {\n    let sectionElement = document.querySelector('.canopy-selected-section');\n    if (sectionElement) {\n      return new Paragraph(sectionElement);\n    } else {\n      return null;\n    }\n  }\n\n  select(options = {}) {\n    if (options?.newTab) return window.open(location.origin + this.path.string, '_blank');\n    return updateView(this.path, this.parentLink, options);\n  }\n\n  addSelectionClass() {\n    this.sectionElement.classList.add('canopy-selected-section');\n  }\n\n  scrollComplete() {\n    this.sectionElement.classList.add('canopy-scroll-complete');\n  }\n\n  static get root() {\n    let path = Path.current.rootTopicPath;\n    return path.paragraph;\n  }\n\n  static containingLink(link) {\n    if (!(link instanceof Link)) throw new Error(\"Must provide link instance argument\");\n    let sectionElement = link.element.parentNode.closest('.canopy-section');\n    return new Paragraph(sectionElement);\n  }\n\n  static get visible() {\n    let path = Path.rendered;\n    let paragraphs = [];\n\n    while (path) {\n      paragraphs.push(path.paragraph);\n      path = parentPath;\n    }\n\n    return paragraphs;\n  }\n\n  static atY(integerY) {\n    return Paragraph.visible.reduce((bestParagraph, currentParagraph) => {\n      if (bestParagraph.top < integerY && bestParagraph.bottom > integerY) return bestParagraph;\n      if (currentParagraph.top < integerY && currentParagraph.bottom > integerY) return currentParagraph;\n      return Math.abs(bestParagraph.top - integerY) < Math.abs(currentParagraph.top - integerY) ? bestParagraph : currentParagraph;\n    });\n  }\n\n  static get focused() {\n    return Paragraph.atY(ScrollableContainer.visibleHeight * 0.3 + ScrollableContainer.currentScroll);\n  }\n\n  static get contentLoaded() {\n    return !!document.querySelector('h1'); // this is a proxy for whether the first render has occured yet\n  }\n\n  static for(element) {\n    return new Paragraph(element);\n  }\n}\n\nexport default Paragraph;\n","import { defaultTopic, canopyContainer, projectPathPrefix, hashUrls } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport Paragraph from 'models/paragraph';\nimport Link from 'models/link';\nimport Topic from '../../cli/shared/topic';\nimport updateView from 'display/update_view';\n\nclass Path {\n  constructor(argument) {\n    if (!argument) {\n      this.pathArray = [];\n    } else if (Array.isArray(argument)) {\n      if (argument.length === 0) {\n        this.pathArray = [];\n      } else {\n        this.pathArray = argument.slice();\n        Path.validatePathArray(this.array);\n      }\n      this.pathString = Path.arrayToString(this.array);\n    } else if (typeof argument === 'string' || argument instanceof String) {\n      this.pathArray = Path.stringToArray(argument);\n      this.pathString = Path.arrayToString(this.array); // array formation removes invalid segments so we reform the string\n    }\n  }\n\n  get length() {\n    if (!this.pathArray[0]) {\n      return 0;\n    } else {\n      return this.pathArray.length;\n    }\n  }\n\n  static stringToArray(pathString) {\n    if (typeof pathString !== 'string') throw new Error(\"Function requires string argument\");\n\n    if (pathString === '/') {\n      return [];\n    }\n\n    let slashSeparatedUnits = pathString.\n      split('/').\n      filter((string) => string !== '');\n\n    slashSeparatedUnits = Path.fixOrphanSubtopics(pathString, slashSeparatedUnits);\n\n    let array = slashSeparatedUnits.map((slashSeparatedUnit) => {\n      // Capture two groups: (letters)#(optional_more_letters)\n      let match = slashSeparatedUnit.match(/([^#]*)(?:#([^#]*))?/);\n      return [\n        match[1] || match[2] || null,\n        match[2] || match[1] || null,\n      ];\n    }).filter((segment) => segment[0] !== null);\n\n    array = array.map(([topicString, subtopicString]) => [\n      Topic.fromEncodedSlug(topicString),\n      Topic.fromEncodedSlug(subtopicString)\n    ]);\n\n\n    return array;\n  }\n\n  static arrayToString(array) {\n    if (!Array.isArray(array)) throw new Error('Argument must be array');\n\n    if (Array.isArray(array) && array.length === 0) {\n      return '/';\n    }\n\n    if (!Array.isArray(array[0])) {\n      throw new Error('Path array must be two-dimensional array');\n    }\n\n    let pathString = '/';\n\n    pathString += array.map(([topic, subtopic]) => {\n      let pathSegmentString = topic.url;\n      if (subtopic && subtopic.url !== topic.url) {\n        pathSegmentString += \"#\" + subtopic.url;\n      }\n      return pathSegmentString;\n    }).join('/');\n\n    return pathString;\n  }\n\n  equals(otherPath) {\n    if (!otherPath) return false;\n    return this.string === otherPath.string;\n  }\n\n  isIn(otherPath) { // is otherPath a subpath of this\n    if (!otherPath) return false;\n    if (this.equals(otherPath)) return true;\n    if (otherPath.isSingleTopic) return false;\n    if (this.isSegmentOf(otherPath)) return true; // trying to figure it out before DOM is rendered\n    if (this.visitsTopicNotIn(otherPath)) return false // trying to figure it out before DOM is rendered\n    return this.isIn(otherPath?.paragraph?.parentParagraph.path);\n  }\n\n  visitsTopicNotIn(otherPath) {\n    return this.topicStringArray.some(topic => !otherPath.topicStringArray.includes(topic));\n  }\n\n  isSegmentOf(otherPath) { // the visible path string has subset\n    return otherPath.string.includes(this.string);\n  }\n\n  includes(otherPath) {\n    return otherPath.isIn(this);\n  }\n\n  get array() {\n    return this.pathArray;\n  }\n\n  get string() {\n    return this.pathString;\n  }\n\n  get empty() {\n    return !this.array[0];\n  }\n\n  slice() {\n    return new this.constructor(this.pathArray.slice.call(this.pathArray, ...arguments));\n  }\n\n  get segments() {\n    return this.pathArray;\n  }\n\n  get firstTopic() {\n    if (this.empty) return null;\n    return this.pathArray[0][0];\n  }\n\n  get firstTopicPath() {\n    return this.constructor.forSegment(this.pathArray[0][0], this.pathArray[0][0]);\n  }\n\n  get lastTopic() {\n    return this.lastSegment.topic;\n  }\n\n  get topic() {\n    return this.lastSegment.array[0]?.[0];\n  }\n\n  get firstSubtopic() {\n    if (this.empty) return null;\n    return this.pathArray[0][1];\n  }\n\n  get lastSubtopic() {\n    return this.lastSegment.subtopic;\n  }\n\n  get secondTopic() {\n    return this.pathArray[1] && this.pathArray[1][0];\n  }\n\n  get secondSubtopic() {\n    return this.pathArray[1] && this.pathArray[1][1];\n  }\n\n  get firstSegment() {\n    return new this.constructor(this.pathArray.slice(0, 1));\n  }\n\n  get lastSegment() {\n    return new this.constructor(this.pathArray.slice(-1));\n  }\n\n  get withoutFirstSegment() {\n    return new this.constructor(this.pathArray.slice(1));\n  }\n\n  get withoutLastSegment() {\n    return new this.constructor(this.pathArray.slice(0, -1));\n  }\n\n  get isSingleTopic() {\n    return this.pathArray.length === 1 && this.pathArray[0][0].mixedCase === this.pathArray[0][1].mixedCase;\n  }\n\n  get parentPath() {\n    return this.paragraph?.parentParagraph?.path;\n  }\n\n  get parentLink() {\n    return this.paragraph?.parentLink;\n  }\n\n  get nextLink() {\n    return this.paragraph?.firstLink || this.paragraph?.parentLink;\n  }\n\n  forEach(callback) {\n    this.array.forEach(callback);\n  }\n\n  clone() {\n    return new Path(this.array.slice());\n  }\n\n  get cycle() {\n    let cycle = null;\n\n    this.array.forEach((selectedSegment, selectedIndex) => {\n      this.array.forEach((currentSegment, currentIndex) => {\n        if (selectedSegment[0].mixedCase === currentSegment[0].mixedCase && selectedIndex < currentIndex) {\n          cycle = {\n            start: selectedIndex,\n            end: currentIndex\n          };\n        }\n      });\n    });\n\n    return cycle;\n  }\n\n  reduce() {\n    const cycle = this.cycle;\n    let resultPath;\n\n    if (cycle) {\n      const pathWithoutCycle = [\n        ...this.array.slice(0, cycle.start),\n        ...this.array.slice(cycle.end)\n      ];\n      resultPath = new Path(pathWithoutCycle);\n    } else {\n      resultPath = this.clone();\n    }\n\n    return resultPath;\n  }\n\n  static introducesNewCycle(parentPath, literalPath) {\n    if (literalPath.reduce().length < literalPath.length) return true; // unlikely but technically this introduces cycle\n\n    let parentPathTopicStrings = parentPath.topicArray.map(t => t.mixedCase); // we only want a cycle not already in parentPath\n    let targetPathTopicStrings = literalPath.topicArray.map(t => t.mixedCase);\n    return parentPathTopicStrings.some((enclosingTopicString, enclosingTopicIndex) => {\n      return targetPathTopicStrings.some((targetTopicString, targetTopicIndex) => {\n        return enclosingTopicString === targetTopicString &&\n          !(parentPath.equals(parentPath.append(literalPath).reduce()))// Reject A/B/C -> C or A/B/C/C -> C, where reduction equals current path producing no-op\n      });\n    });\n  }\n\n  overlap(otherPath) {\n    if (this.firstTopic.mixedCase !== otherPath.firstTopic.mixedCase) return null;\n    let candidatePath = otherPath;\n\n    while (!candidatePath.isSingleTopic) {\n      if (this.includes(candidatePath)) return candidatePath;\n      if (!candidatePath.parentPath) throw new Error(`Undefined parent path for ${candidatePath}`);\n      candidatePath = candidatePath.parentPath;\n    }\n\n    return candidatePath;\n  }\n\n  subsetOf(otherPath) { // this is subset of otherPath\n    return otherPath.includes(this) &&\n      !this.equals(otherPath); // unlike #includes, which accepts a self-match\n  }\n\n  intermediaryPaths(otherPath) {\n    if (!this.overlap(otherPath)) return null;\n    if (!this.subsetOf(otherPath)) return null;\n\n    let result = [];\n    let bufferPath = otherPath.clone();\n\n    while(bufferPath && !this.equals(bufferPath)) {\n      result.unshift(bufferPath);\n      bufferPath = bufferPath.parentPath;\n    }\n\n    result.unshift(this);\n\n    return result;\n  }\n\n  siblingOf(otherPath) {\n    return !!(this.parentPath && otherPath.parentPath) && // if either doesn't have a parent it can't have siblings\n      !this.equals(otherPath) && // doesn't count if the paths are the same\n      this.parentPath.equals(otherPath.parentPath);\n  }\n\n  childOf(otherPath) { // this is child of otherPath\n    return this.parentPath?.equals(otherPath);\n  }\n\n  parentOf(otherPath) { // this is parent of otherPath\n    return otherPath.parentPath?.equals(this);\n  }\n\n  display(options = {}) {\n    if (options?.newTab) return window.open(location.origin + this.string, '_blank');\n    if (this.empty) return console.error('Cannot display empty path');\n\n    return updateView(this, this.parentLink, options);\n  }\n\n  selectALink(options = {}) {\n    return this.display({ renderOnly: true}).then(() => (this.paragraph.firstLink || this.paragraph.parentLink).select(options));\n  }\n\n  addSegment(topic, subtopic) {\n    if (this.empty) return new Path([[topic, subtopic]]);\n    return new Path(this.array.concat([[topic, subtopic]]));\n  }\n\n  append(otherPath) {\n    return new Path(this.string + '/' + otherPath.string);\n  }\n\n  replaceTerminalSubtopic(newSubtopic) {\n    if (this.length === 0) return this;\n    let lastSegment = this.lastSegment;\n    return this.withoutLastSegment.addSegment(lastSegment.firstTopic, newSubtopic);\n  }\n\n  toString() {\n    return this.string;\n  }\n\n  get rootTopicPath() {\n    if (this.length > 0) {\n      return new Path([[this.firstTopic, this.firstTopic]]);\n    } else {\n      return this;\n    }\n  }\n\n  get topicArray() {\n    return this.array.map(([topic, subtopic]) => topic);\n  }\n\n  get topicStringArray() {\n    return this.array.map(([topic, subtopic]) => topic.mixedCase);\n  }\n\n  get sectionElement() {\n    return Path.elementAtRelativePath(this, canopyContainer);\n  }\n\n  get paragraph() {\n    if (this.sectionElement) {\n      return new Paragraph(this.sectionElement);\n    } else {\n      return null;\n    }\n  }\n\n  get parentParagraph() {\n    return this.paragraph.parentParagraph;\n  }\n\n  get present() {\n    return !!this.array[0];\n  }\n\n  static shouldAnimate(pathToDisplay, linkToSelect, options = {}) { // we animate when the new path overlaps a bit but goes far up or in a different direction\n    if (!Path.rendered) return false;  // user may be changing URL first so we use path from DOM\n    if (!pathToDisplay.paragraph) return false;\n    if (options.noScroll || options.noAnimate || options.initialLoad || options.noDisplay || options.scrollStyle === 'instant') return false;\n\n    let firstDestinationElement = (options.scrollToParagraph || !linkToSelect) ? pathToDisplay.paragraph.paragraphElement : linkToSelect.element;\n    let firstDestinationY = firstDestinationElement.top - ScrollableContainer.focusGap;\n\n    let longDistanceUp = firstDestinationY - ScrollableContainer.currentScroll < -ScrollableContainer.focusGap;\n\n    let twoStepChange = !!Path.rendered.overlap(pathToDisplay)\n      && !Path.rendered.equals(pathToDisplay)\n      && !Path.rendered.subsetOf(pathToDisplay)\n      && !Path.rendered.siblingOf(pathToDisplay)\n      && !pathToDisplay.parentOf(Path.rendered) // this doesn't disqualify animation but we would require a large gap\n\n    return longDistanceUp || twoStepChange;\n  }\n\n  static get default() {\n    let topic = Topic.for(defaultTopic());\n    return new Path([[topic, topic]]);\n  }\n\n  static get root() {\n    return Path.url.rootTopicPath;\n  }\n\n  static get current() {\n    return Path.rendered || Path.url;\n  }\n\n  static get rendered() {\n    return Paragraph.selection?.path;  // the user may have just changed the URL, and we want to know what the current path rendered is\n  }\n\n  static get focused() {\n    let focusY = ScrollableContainer.visibleHeight * 0.3 + ScrollableContainer.currentScroll;\n\n    Array.from(document.querySelectorAll('.canopy-paragraph')).find(paragraphElement => {\n\n    });\n  }\n\n  static get url() {\n    let pathString = window.location.href.slice(window.location.origin.length)\n\n    if (projectPathPrefix && pathString.indexOf(`/${projectPathPrefix}`) === 0) {\n      pathString = pathString.slice(projectPathPrefix.length + 1); // remove prefix and leading slash\n    }\n\n    if (pathString.indexOf('/#') === 0) pathString = pathString.slice(2);  // remove hash sign plus leading slash\n\n    return new Path(pathString);\n  }\n\n  static get initial() {\n    if (Path.url.present && Link.savedSelection) {\n      return Link.savedSelection.previewPath;\n    } else if (Path.url.empty) {\n      return Path.default;\n    } else {\n      return Path.url;\n    }\n  }\n\n  static connectingLinkValid(parentElement, pathToAppend) {\n    if (!parentElement) throw new Error('Parent element required');\n    if (!(pathToAppend instanceof Path)) throw new Error('pathToAppend must be a Path object');\n\n    if (parentElement === canopyContainer) return true;\n\n    let parentParagraph = new Paragraph(parentElement);\n    if (!parentParagraph.linkByChild(pathToAppend.firstTopic)) {\n      console.error(`Parent element [${parentParagraph.topic.mixedCase}, ${parentParagraph.subtopic.mixedCase}] has no ` +\n        `connecting link to subsequent path segment [${pathToAppend.firstTopic.mixedCase}, ${pathToAppend.firstTopic.mixedCase}]`);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  static elementAtRelativePath(path, rootElement) {\n    if (!(path instanceof Path)) throw new Error('pathToDisplay must be a Path object');\n    rootElement = rootElement || canopyContainer;\n\n    let currentNode = rootElement;\n    let subpath = path;\n    let currentPathDepth = Number(rootElement.dataset.pathDepth || -1);\n\n    for (let i = 0; i < path.length; i++) {\n      currentPathDepth = currentPathDepth + 1;\n      currentNode = currentNode.querySelector(\n        `:scope > ` + // the next topic must be a direct child of the current subtopic, not some other subtopic with the same global link\n        `[data-topic-name=\"${subpath.firstTopic.cssMixedCase}\"]` +\n        `[data-subtopic-name=\"${subpath.firstTopic.cssMixedCase}\"]` +\n        `[data-path-depth=\"${currentPathDepth}\"]` +\n        (subpath.firstTopic.mixedCase !== subpath.firstSubtopic.mixedCase ? // only look for a subtopic if the path segment has one\n        ` ` +\n        `[data-topic-name=\"${subpath.firstTopic.cssMixedCase}\"]` +\n        `[data-subtopic-name=\"${subpath.firstSubtopic.cssMixedCase}\"]` +\n        `[data-path-depth=\"${currentPathDepth}\"]` : '')\n      );\n\n      if (!currentNode) return null;\n      subpath = subpath.withoutFirstSegment;\n    }\n\n    if (!currentNode) console.log('element at relative path', path, rootElement, currentNode);\n\n    return currentNode;\n  }\n\n  static setPath(newPath, options = {}) {\n    if (!(newPath instanceof Path)) throw new Error('newPath must be Path object');\n\n    let oldPath = Path.url;\n    let documentTitle = newPath.lastTopic.mixedCase;\n    let historyApiFunction = ((Path.url.empty || newPath.equals(oldPath)) && !options.pushHistoryState) ? replaceState : pushState;\n    let fullPathString = newPath.productionPathString;\n\n    historyApiFunction(\n      history.state, // this will be changed via Link#persistInHistory\n      documentTitle,\n      fullPathString\n    );\n\n    function replaceState(a, b, c) {\n      history.replaceState(a, b, c);\n    }\n\n    function pushState(a, b, c) {\n      history.pushState(a, b, c);\n    }\n  }\n\n  get productionPathString() {\n    let productionPathString = '';\n\n    if (projectPathPrefix) productionPathString += `/${projectPathPrefix}`;\n\n    if (hashUrls) productionPathString += '/#';\n\n    return productionPathString + this.pathString;\n  }\n\n  static fixOrphanSubtopics(pathString, slashSeparatedUnits) {\n    // Sometimes browsers insert forward slashes before the first pound sign which we have to remove\n    // eg /Topic/#Subtopic/A#B  -> /Topic#Subtopic/A#B\n\n    if (typeof pathString !== 'string') throw new Error(\"pathString must be a string argument\");\n    if (!Array.isArray(slashSeparatedUnits)) throw new Error('slashSeparatedUnits must be an array');\n\n    if (pathString.match(/\\/#\\w+/)) {\n      for (let i = 1; i < slashSeparatedUnits.length; i++) {\n        if (slashSeparatedUnits[i].match(/^#/)) {\n          if (!slashSeparatedUnits[i - 1].match(/#/)) { // eg /Topic/#Subtopic -> /Topic#Subtopic\n            let newItem = slashSeparatedUnits[i - 1] + slashSeparatedUnits[i];\n            let newArray = slashSeparatedUnits.slice(0, i - 1).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          } else { // eg /Topic#Subtopic/#Subtopic2 -> /Topic#Subtopic/Subtopic2\n            let newItem = slashSeparatedUnits[i].slice(1);\n            let newArray = slashSeparatedUnits.slice(0, i).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          }\n        }\n      }\n    }\n\n    return slashSeparatedUnits;\n  }\n\n  static validatePathArray(array) {\n    array.forEach(tuple => {\n      if (tuple.length !== 2) throw new Error(`Invalid path segment format: ${tuple}`);\n      if (!(tuple[0] instanceof Topic) || !(tuple[1] instanceof Topic)) throw new Error(`Invalid path segment format: ${JSON.stringify(tuple)}`);\n    })\n  }\n\n  static forTopic(topic) {\n    return new this([[topic, topic]]);\n  }\n\n  static forSegment(topic, subtopic) {\n    if (!(topic instanceof Topic && subtopic instanceof Topic)) throw new Error('Argument must be of type Topic');\n    return new this([[topic, subtopic]]);\n  }\n\n  static for(arg) {\n    return new this(arg);\n  }\n\n  static from(arg) {\n    return new this(arg);\n  }\n}\n\nexport default Path;\n","import fetchAndRenderPath from 'render/fetch_and_render_path';\nimport requestJson from 'requests/request_json';\nimport Paragraph from 'models/paragraph';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport Topic from '../../cli/shared/topic';\nimport renderTokenElement from 'render/render_token_element';\n\nfunction renderDomTree(topic, subtopic, renderContext) {\n  let { paragraphsBySubtopic } = renderContext;\n\n  let sectionElement = createSectionElement(topic, subtopic, renderContext);\n  let paragraph = new Paragraph(sectionElement);\n\n  renderContext.localLinkSubtreeCallback = localLinkSubtreeCallback(topic, sectionElement, renderContext);\n\n  let tokensOfParagraph = paragraphsBySubtopic[subtopic.mixedCase];\n  if (!tokensOfParagraph) throw new Error(`Paragraph with subtopic not found: ${subtopic.mixedCase}`);\n\n  renderContext.currentTopic = topic;\n  renderContext.currentSubtopic = subtopic;\n\n  tokensOfParagraph.forEach((token) => {\n    let element = renderTokenElement(token, renderContext);\n    paragraph.paragraphElement.appendChild(element);\n  });\n\n  return sectionElement;\n}\n\nfunction localLinkSubtreeCallback(topic, sectionElement, renderContext) {\n  return (token) => {\n\n    let { fullPath, remainingPath, currentTopic } = renderContext;\n    let newSubtopic = Topic.fromMixedCase(token.targetSubtopic);\n    let pathToEnclosingTopic = fullPath.slice(0, fullPath.length - remainingPath.length);\n    let pathToParagaph = pathToEnclosingTopic.addSegment(topic, newSubtopic);\n    // console.log(token.targetSubtopic, {fullPath, remainingPath, currentTopic, newSubtopic, pathToEnclosingTopic, pathToParagaph})\n\n    let childSectionElement = renderDomTree(\n      topic,\n      Topic.fromMixedCase(token.targetSubtopic),\n      Object.assign({ pathToParagaph }, renderContext)\n    );\n\n    sectionElement.appendChild(childSectionElement);\n  }\n}\n\nfunction createSectionElement(topic, subtopic, renderContext) {\n  let {\n    displayTopicName, pathDepth, paragraphsBySubtopic\n  } = renderContext;\n\n  let sectionElement = document.createElement('section');\n  sectionElement.classList.add('canopy-section');\n  let paragraphElement = document.createElement('p');\n  paragraphElement.classList.add('canopy-paragraph');\n  sectionElement.appendChild(paragraphElement);\n  sectionElement.style.display = 'none';\n  sectionElement.style.opacity = '0';\n  sectionElement.dataset.displayTopicName = displayTopicName;\n  sectionElement.dataset.topicName = topic.mixedCase;\n  sectionElement.topicName = topic.mixedCase; // helpful to have in debugger\n  sectionElement.dataset.subtopicName = subtopic.mixedCase;\n  sectionElement.subtopicName = subtopic.mixedCase; // helpful to have in debugger\n  sectionElement.dataset.pathDepth = pathDepth;\n  let tokens = paragraphsBySubtopic[topic.mixedCase];\n\n  if (topic.mixedCase === subtopic.mixedCase) {\n    if (pathDepth > 0 && tokens.length > 0) sectionElement.prepend(document.createElement('hr'));\n    sectionElement.classList.add('canopy-topic-section');\n  }\n\n  return sectionElement;\n}\n\nexport default renderDomTree;\n","import renderDomTree from 'render/render_dom_tree';\nimport requestJson from 'requests/request_json';\nimport Path from 'models/path';\nimport { canopyContainer } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport { generateHeader } from 'render/helpers';\n\nconst fetchAndRenderPath = (fullPath, remainingPath, parentElementOrPromise) => {\n  if (remainingPath.length === 0) {\n    return Promise.resolve(parentElementOrPromise);\n  }\n\n  if (parentElementOrPromise instanceof HTMLElement) {\n    let preexistingElement = Path.elementAtRelativePath(remainingPath.firstSegment, parentElementOrPromise);\n    if (preexistingElement) return fetchAndRenderPath(fullPath, remainingPath.withoutFirstSegment, preexistingElement);\n    parentElementOrPromise = Promise.resolve(parentElementOrPromise);\n  }\n\n  let sectionElementPromise = requestJson(remainingPath.firstTopic)\n    .then(({ paragraphsBySubtopic, displayTopicName, topicTokens }) => {\n      if (fullPath.equals(remainingPath)) canopyContainer.prepend(generateHeader(topicTokens, displayTopicName));\n\n      return renderDomTree(\n        remainingPath.firstTopic,\n        remainingPath.firstTopic,\n        {\n          remainingPath,\n          displayTopicName,\n          paragraphsBySubtopic,\n          fullPath,\n          pathToParagraph: fullPath.slice(0, fullPath.length - remainingPath.length + 1),\n          pathDepth: fullPath.length - remainingPath.length\n        },\n      );\n    }).catch(e => { return null }); // 404\n\n  let appendingPromise = Promise.all([parentElementOrPromise, sectionElementPromise]).then(([parentSectionElement, sectionElement]) => {\n    if (!parentSectionElement || !sectionElement) return Promise.resolve();\n    if (!Path.connectingLinkValid(parentSectionElement, remainingPath)) return Promise.resolve(); // fail silently, error on tryPrefix\n    parentSectionElement.appendChild(sectionElement);\n  });\n\n  let subtopicElementPromise = sectionElementPromise.then(sectionElement => {\n    if (!sectionElement) return null;\n    return sectionElement.querySelector(`section[data-subtopic-name=\"${remainingPath.firstSubtopic.cssMixedCase}\"]`) || sectionElement; // querySelector can't target self\n  });\n\n  let childSectionElementPromise = fetchAndRenderPath(fullPath, remainingPath.withoutFirstSegment, subtopicElementPromise);\n\n  return Promise.all([sectionElementPromise, parentElementOrPromise, childSectionElementPromise, appendingPromise])\n    .then(([sectionElement]) => sectionElement);\n}\n\nexport default fetchAndRenderPath;\n","import Topic from '../../cli/shared/topic';\nimport renderTokenElement from './render_token_element';\n\nfunction generateHeader(topicTokens, displayTopicName) {\n  let topic = new Topic(displayTopicName);\n\n  let previousHeader = document.querySelector(`h1[data-topic-name=\"${topic.cssMixedCase}\"]`);\n  if (previousHeader) return previousHeader;\n\n  let headerElement = document.createElement('h1');\n  headerElement.dataset.topicName = topic.mixedCase;\n  headerElement.style.display = 'none';\n\n  topicTokens.forEach(token => {\n    let element = renderTokenElement(token);\n    headerElement.appendChild(element);\n  });\n\n  return headerElement\n}\n\nexport { generateHeader };\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nfunction onLinkClick(link) {\n  return (e) => {\n    e.preventDefault();\n    let newTab = e.metaKey || e.ctrlKey; // mac vs linux and windows\n    let redirect = e.altKey;\n    let inlineCycles = e.shiftKey;\n    let redirectingCycle = link.cycle && !inlineCycles;\n\n    if (!newTab && !e.altKey && link.isSelected && !link.isClosedCycle && !link.isPathReference) { // close global link\n      return link.parentLink?.select({ scrollDirect: true, noAnimate: true }) || Path.root.display({ scrollDirect: true, noAnimate: true });\n    }\n\n    if (!newTab && !e.altKey && link.isOpen && !link.isClosedCycle && !link.isPathReference) { // select open link\n      return link.select({ scrollDirect: true, noAnimate: true }); // not scrollToParagraph because returning up to parent link\n    }\n\n    if (!newTab && !e.altKey && link.isOffScreen && !link.isClosedCycle) { // scroll up to see partially visible link\n      return link.select({ scrollDirect: true, noAnimate: true }); // not scrollToParagraph because returning up to parent link\n    }\n\n    return link.execute({\n      newTab,\n      redirect: e.altKey,\n      inlineCycles: e.shiftKey,\n      scrollDirect: true,\n      scrollToParagraph: !link?.isBackCycle,\n      selectALink: false,\n      pushHistoryState: true,\n      noAnimate: !redirectingCycle // most clicks cause downward movement except redirecting cycles\n    });\n  }\n}\n\nexport { onLinkClick };\n","import { onLinkClick } from 'render/click_handlers';\nimport externalLinkIconSvg from 'assets/external_link_icon/icon.svg';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport Path from 'models/path';\nimport Topic from '../../cli/shared/topic';\nimport { projectPathPrefix, hashUrls, canopyContainer } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport { scrollPage, imagesLoaded, scrollToWithPromise, getScrollInProgress } from 'display/helpers';\nimport requestJson from 'requests/request_json';\n\nfunction renderTokenElement(token, renderContext) {\n  if (token.type === 'text') {\n    return renderTextToken(token);\n  } else if (token.type === 'local') {\n    renderContext.localLinkSubtreeCallback(token);\n    return renderLocalLink(token, renderContext);\n  } else if (token.type === 'global') {\n    requestJson(Path.for(token.pathString).firstTopic); // eager load\n    return renderGlobalLink(token, renderContext);\n  } else if (token.type === 'import') {\n    return renderImportLink(token, renderContext);\n  } else if (token.type === 'external') {\n    return renderExternalLink(token, renderContext);\n  } else if (token.type === 'image') {\n    return renderImage(token, renderContext);\n  } else if (token.type === 'html_element') {\n    return renderHtmlElement(token, renderContext);\n  } else if (token.type === 'footnote_marker') {\n    return renderFootnoteSymbol(token);\n  } else if (token.type === 'code_block') {\n    return renderCodeBlock(token);\n  } else if (token.type === 'block_quote') {\n    return renderBlockQuote(token, renderContext);\n  } else if (token.type === 'outline') {\n    return renderList(token.topLevelNodes, renderContext);\n  } else if (token.type === 'table') {\n    return renderTable(token, renderContext)\n  } else if (token.type === 'table_list') {\n    return renderTableList(token, renderContext)\n  } else if (token.type === 'footnote_lines') {\n    return renderFootnoteLines(token, renderContext);\n  } else if (token.type === 'bold') {\n    return renderBoldText(token, renderContext);\n  } else if (token.type === 'strikethrough') {\n    return renderStrikethroughText(token, renderContext);\n  } else if (token.type === 'italics') {\n    return renderItalicText(token, renderContext);\n  } else if (token.type === 'inline_code') {\n    return renderInlineCodeText(token, renderContext);\n  } else {\n    throw `Unhandled token type: ${token.type}`\n  }\n}\n\nfunction renderTextToken(token) {\n  let spanElement = document.createElement('SPAN');\n  spanElement.innerText = token.text;\n\n  return spanElement;\n}\n\nfunction renderLocalLink(token, renderContext) {\n  let linkElement = document.createElement('a');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.targetTopic = token.targetTopic; // helpful for debugger\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.targetSubtopic = token.targetSubtopic; // helpful to have in debugger\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n\n  token.tokens.forEach(subtoken => {\n    let subtokenElement = renderTokenElement(subtoken, renderContext);\n    linkElement.appendChild(subtokenElement);\n  });\n\n  let callback = onLinkClick(new Link(linkElement));\n\n  linkElement.addEventListener(\n    'click',\n    callback\n  );\n\n  linkElement._CanopyClickHandler = callback;\n\n  linkElement.classList.add('canopy-local-link');\n  linkElement.dataset.type = 'local';\n\n  let targetTopic = new Topic(token.targetTopic);\n  let targetSubtopic = new Topic(token.targetSubtopic);\n  linkElement.href = `${projectPathPrefix ? '/' + projectPathPrefix : ''}${hashUrls ? '/#' : ''}/${targetTopic.url}#${targetSubtopic.url}`;\n  return linkElement;\n}\n\nfunction renderGlobalLink(token, renderContext) {\n  let { fullPath, remainingPath, currentTopic, currentSubtopic } = renderContext;\n\n  let linkElement = document.createElement('a');\n\n  token.tokens.forEach(subtoken => {\n    let subtokenElement = renderTokenElement(subtoken, renderContext);\n    linkElement.appendChild(subtokenElement);\n  });\n\n  linkElement.classList.add('canopy-global-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'global';\n\n  linkElement.dataset.pathString = Path.for(token.pathString).string; // convert to mixed-case\n  linkElement.path = token.path; // helpful to have in debugger\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n\n  linkElement.dataset.text = token.text;\n\n  linkElement.href = Path.for(token.pathString).productionPathString;\n\n  let link = new Link(linkElement);\n\n  linkElement.addEventListener(\n    'click',\n    onLinkClick(link)\n  );\n\n  setTimeout(function assignCycleClasses(){ // requires finished render to know intratopic subtopic hierarchy\n    if (!link.isInDom) setTimeout(assignCycleClasses);\n\n    if (link.isBackCycle) {\n      linkElement.classList.add('canopy-back-cycle-link');\n    } else if (link.isLateralCycle) {\n      linkElement.classList.add('canopy-lateral-cycle-link');\n    } else if (link.isPathReference) {\n      linkElement.classList.add('canopy-path-reference');\n    }\n  });\n\n  return linkElement\n}\n\nfunction renderExternalLink(token, renderContext) {\n  let linkElement = document.createElement('A');\n  linkElement.classList.add('canopy-external-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'external';\n  linkElement.dataset.text = token.text;\n  linkElement.setAttribute('href', token.url.match(/^https?:\\/\\//) ? token.url : 'http://' + token.url);\n  linkElement.setAttribute('target', '_blank');\n\n  setTimeout(() => {\n    if (linkElement.querySelector('img')) linkElement.classList.add('canopy-linked-image');\n  });\n\n  token.tokens.forEach(subtoken => {\n    let subtokenElement = renderTokenElement(subtoken, renderContext);\n    linkElement.appendChild(subtokenElement);\n  });\n\n  return linkElement;\n}\n\nfunction renderImage(token, renderContext) {\n  let divElement = document.createElement('DIV');\n  divElement.classList.add('canopy-image');\n\n  let imageElement = document.createElement('IMG');\n  imageElement.setAttribute('src', token.resourceUrl);\n  imageElement.setAttribute('decoding', 'async'); // don't wait for image decode to update selected link on change\n\n  divElement.appendChild(imageElement);\n\n  if (token.title) {\n    imageElement.setAttribute('title', token.title);\n  }\n\n  if (token.caption) {\n    let spanElement = document.createElement('SPAN');\n    spanElement.classList.add('canopy-image-caption');\n    divElement.appendChild(spanElement);\n\n    token.tokens.forEach(subtoken => {\n      let subtokenElement = renderTokenElement(subtoken, renderContext);\n      spanElement.appendChild(subtokenElement);\n    });\n  }\n\n  if (token.altText) {\n    imageElement.setAttribute('alt', token.altText);\n  }\n\n  handleDelayedImageLoad(imageElement, renderContext);\n\n  return divElement;\n}\n\nfunction handleDelayedImageLoad(imageElement, renderContext) { // we don't know how big the image will be, and don't want the load to disrupt viewport\n  let originalHeight = imageElement.style.height;\n  let originalOpacity = imageElement.style.opacity;\n  imageElement.style.setProperty('height', '500px'); // big because empty space getting replaced with content looks better than content with content\n  imageElement.style.setProperty('opacity', '0');\n  setTimeout(() => { // after 200 ms add gray box but not before then to avoid flash\n    if (!imageElement.complete) (imageElement.closest('.canopy-image')||imageElement).style.setProperty('background-color', '#f5f5f5')\n  }, 200)\n\n  imageElement.addEventListener('load', () => { // if images were unloaded, scroll was delayed and so we do it now to avoid viewport jump\n    (getScrollInProgress() || Promise.resolve()).then(() => { // if there is a scroll in progress, wait for it to complete.\n      let focusedElement = ScrollableContainer.focusedElement;\n      let oldBottomOfCurrentParagraph = focusedElement.getBoundingClientRect().bottom;\n      imageElement.style.setProperty('height', originalHeight);\n      imageElement.style.setProperty('opacity', originalOpacity);\n      imageElement.closest('.canopy-image')?.style.setProperty('background-color', 'transparent') // remove gray placeholder\n      let newBottomOfCurrentParagraph = focusedElement.getBoundingClientRect().bottom;\n      let diff = newBottomOfCurrentParagraph - oldBottomOfCurrentParagraph\n      let current = ScrollableContainer.currentScroll;\n      let newScroll = ScrollableContainer.currentScroll + diff;\n\n      let { pathToParagraph } = renderContext;\n      if (Path.current.includes(pathToParagraph)) { // if when the image loads, it is on the current page and might jump the viewport\n        scrollToWithPromise({  // restore old position\n          top: newScroll,\n          behavior: 'instant'\n        });\n      }\n    });\n  });\n}\n\nfunction renderHtmlElement(token, renderContext) {\n  let divElement = document.createElement('DIV');\n  let fragment = document.createRange().createContextualFragment(token.html); // make script tags functional\n  divElement.appendChild(fragment);\n  divElement.classList.add('canopy-raw-html');\n  [...divElement.querySelectorAll('img')].forEach((imageElement) => { // if the html contains image tags that haven't loaded yet\n    handleDelayedImageLoad(imageElement, renderContext);\n  });\n\n  return divElement;\n}\n\nfunction renderFootnoteSymbol(token) {\n  let superscriptElement = document.createElement('SUP');\n  let textNode = document.createTextNode(token.text);\n  superscriptElement.appendChild(textNode);\n  return superscriptElement;\n}\n\nfunction renderCodeBlock(token) {\n  let preElement = document.createElement('PRE');\n  let codeBlockElement = document.createElement('CODE');\n  preElement.appendChild(codeBlockElement);\n\n  codeBlockElement.innerText = token.text;\n\n  return preElement;\n}\n\nfunction renderBlockQuote(token, renderContext) {\n  let blockQuoteElement = document.createElement('BLOCKQUOTE');\n  blockQuoteElement.setAttribute('dir', token.direction);\n\n  token.tokens.forEach(subtoken => {\n    let subtokenElement = renderTokenElement(subtoken, renderContext);\n    blockQuoteElement.appendChild(subtokenElement);\n  });\n\n  return blockQuoteElement;\n}\n\nfunction renderList(listNodeObjects, renderContext) {\n  let listElement = listNodeObjects[0].ordered ?\n    document.createElement('OL') :\n    document.createElement('UL');\n\n  if (listNodeObjects[0].ordered) {\n    listElement.setAttribute('type', listNodeObjects[0].ordinal);\n  }\n\n  listNodeObjects.forEach((listNodeObject) => {\n    let listItemElement = document.createElement('LI');\n\n    listNodeObject.tokensOfLine.forEach(\n      (token) => {\n        let tokenElement = renderTokenElement(token, renderContext);\n        listItemElement.appendChild(tokenElement);\n      }\n    );\n\n    if (listNodeObject.children.length > 0) {\n      let childList = renderList(listNodeObject.children);\n      listItemElement.appendChild(childList);\n    }\n\n    listElement.appendChild(listItemElement);\n  });\n  return listElement;\n}\n\nfunction renderTable(token, renderContext) {\n  let tableElement = document.createElement('TABLE');\n  tableElement.setAttribute('dir', 'instant');\n  if (token.rtl) tableElement.setAttribute('dir', 'rtl');\n\n  token.rows.forEach(\n    (row) => {\n      let tableRowElement = document.createElement('TR');\n      if (token.rtl) tableRowElement.setAttribute('dir', 'rtl');\n\n      row.forEach(\n        (cellObject) => {\n          let tableCellElement = document.createElement('TD');\n          if (cellObject.hidden) tableCellElement.classList.add('hidden');\n\n          cellObject.tokens.forEach(\n            (token) => {\n              let tokenElement = renderTokenElement(token, renderContext);\n\n              if (cellObject.colspan) tableCellElement.setAttribute('colspan', cellObject.colspan);\n              if (cellObject.rowspan) tableCellElement.setAttribute('rowspan', cellObject.rowspan);\n\n              if (cellObject.tokens.length === 1 && tokenElement.tagName === 'A') {\n                tableCellElement.classList.add('canopy-table-link-cell');\n                tokenElement.classList.add('canopy-table-link');\n                tableCellElement.addEventListener('click', tokenElement._CanopyClickHandler);\n                tokenElement.removeEventListener('click', tokenElement._CanopyClickHandler)\n              }\n\n              tableCellElement.appendChild(tokenElement);\n            }\n          );\n\n          if (!cellObject.merge) {\n            tableRowElement.appendChild(tableCellElement);\n          }\n        }\n      )\n      tableElement.appendChild(tableRowElement);\n    }\n  );\n  return tableElement;\n}\n\nfunction renderTableList(token, renderContext) {\n  let tableListElement = document.createElement('DIV');\n  tableListElement.classList.add('canopy-table-list');\n\n  if (token.rtl) tableListElement.dir = 'rtl';\n\n  if (token.alignment === 'right') tableListElement.classList.add('canopy-align-right');\n  if (token.alignment === 'left') tableListElement.classList.add('canopy-align-left');\n\n  let SizesByArea = ['quarter-pill', 'third-pill', 'half-pill', 'quarter-card', 'third-card', 'half-tube', 'half-card'];\n  let tableListSizeIndex = 0;\n\n  let cellElements = token.items.map((cellObject, cellIndex) => {\n    let tableCellElement = document.createElement('DIV');\n    tableCellElement.classList.add('canopy-table-list-cell');\n    let contentContainer = document.createElement('DIV');\n    contentContainer.classList.add('canopy-table-list-content-container');\n\n    if (cellObject.hidden) tableCellElement.style.opacity = '0';\n\n    let tokenElement = renderTokenElement(cellObject.tokens[0], renderContext);\n\n    if (cellObject.tokens.length === 1 && tokenElement.tagName === 'A') {\n      tokenElement.classList.add('canopy-table-list-cell');\n      tokenElement.classList.add('canopy-table-list-link-cell');\n      while (tokenElement.firstChild) contentContainer.appendChild(tokenElement.firstChild);\n      tableCellElement = tokenElement;\n      tableCellElement.appendChild(contentContainer);\n    } else {\n      cellObject.tokens.forEach(token => {\n        tokenElement = renderTokenElement(token, renderContext);\n        contentContainer.appendChild(tokenElement);\n      });\n      tableCellElement.appendChild(contentContainer);\n    }\n\n    if (cellObject.list) {\n      let ordinalElement = document.createElement('SPAN');\n      ordinalElement.classList.add('canopy-table-list-ordinal');\n      ordinalElement.innerHTML = cellObject.ordinal + '.&nbsp;';\n      contentContainer.prepend(ordinalElement);\n      tableCellElement.classList.add('canopy-table-list-ordinal-cell');\n    }\n\n    return tableCellElement;\n  });\n\n  let tempParagraphElement = document.createElement('p');\n  tempParagraphElement.classList.add('canopy-paragraph');\n  let tempSectionElement = document.createElement('section');\n  tempSectionElement.classList.add('canopy-section');\n  let tempRowElement = createNewRow();\n  canopyContainer.appendChild(tempSectionElement);\n  tempSectionElement.appendChild(tempParagraphElement);\n  tempParagraphElement.appendChild(tableListElement);\n  tableListElement.appendChild(tempRowElement);\n\n  for (let i = 0; i < cellElements.length; i++) {\n    // try fitting text into boxes and find the minimum cell size that fits\n    let tableCellElement = cellElements[i];\n    tempRowElement.appendChild(tableCellElement);\n    tableCellElement.style.overflow = 'scroll';\n\n    while(1) {\n      if (tableListSizeIndex === 2 && token.items.length > 2) tableListSizeIndex = 3 // quarters look better than halves\n      if (token.items.length < 3 && !token.alignment && tableListSizeIndex < 2) { // even if content isn't big, expand if there aren't so many\n        tableListSizeIndex = 2;\n      }\n\n      tableListElement.classList.add(`canopy-${SizesByArea[tableListSizeIndex]}`);\n\n      let availableWidth = tableCellElement.clientWidth -\n        parseFloat(window.getComputedStyle(tableCellElement).paddingLeft) -\n        parseFloat(window.getComputedStyle(tableCellElement).paddingRight);\n\n      let availableHeight = tableCellElement.clientHeight -\n        parseFloat(window.getComputedStyle(tableCellElement).paddingTop) -\n        parseFloat(window.getComputedStyle(tableCellElement).paddingBottom);\n\n      let scrollWidth = tableCellElement.firstChild.scrollWidth -\n        parseFloat(window.getComputedStyle(tableCellElement).borderWidth) * 2;\n\n      let scrollHeight = tableCellElement.firstChild.scrollHeight -\n        parseFloat(window.getComputedStyle(tableCellElement).borderWidth) * 2;\n\n      let tooWide = scrollWidth > availableWidth;\n      let tooTall = scrollHeight > availableHeight;\n\n      if (!tooWide && !tooTall) break; // fits\n      if (tableListSizeIndex >= SizesByArea.length - 1) break; // no bigger sizes\n\n      tableListElement.classList.remove(`canopy-${SizesByArea[tableListSizeIndex]}`);\n      tableListSizeIndex++;\n      i = 0; // once we increment the size, we have to try on all previous elements because larger area might have narrower width\n    }\n\n  }\n\n  tempParagraphElement.remove();\n  tempRowElement.remove();\n  tempSectionElement.remove();\n  tableListElement.classList.add(`canopy-${SizesByArea[tableListSizeIndex]}`);\n\n  function createNewRow() {\n    let newRow = document.createElement('DIV');\n    newRow.classList.add('canopy-table-list-row');\n    if (token.rtl) newRow.dir = 'rtl';\n    tableListElement.appendChild(newRow);\n    return newRow;\n  }\n\n  let rowSize;\n  if (SizesByArea[tableListSizeIndex].includes('half')) rowSize = 2;\n  if (SizesByArea[tableListSizeIndex].includes('third')) rowSize = 3;\n  if (SizesByArea[tableListSizeIndex].includes('quarter')) rowSize = 4;\n\n  // Create the first row\n  let tableRowElement = createNewRow();\n\n  // Assuming cellElements is your array of cells\n  for (let i = 0; i < cellElements.length; i++) {\n    // Append cell to current row\n    tableRowElement.appendChild(cellElements[i]);\n\n    // If row is full and there are more cells to add, create a new row\n    if ((i + 1) % rowSize === 0 && (i + 1) !== cellElements.length) {\n      tableRowElement = createNewRow();\n    }\n  }\n\n  if (tableListElement.childNodes.length > 1) { // if there is more than one row\n    const remainingCells = cellElements.length % rowSize;\n    const cellsToAdd = remainingCells > 0 ? rowSize - remainingCells : 0;\n    for (let i = 0; i < cellsToAdd; i++) {\n      let paddingElement = document.createElement('DIV');\n      paddingElement.classList.add('canopy-table-list-cell');\n      paddingElement.style.opacity = '0';\n      tableRowElement.appendChild(paddingElement);\n    }\n  }\n\n  return tableListElement;\n\n  function getTotalWidthWithAfter(element) {\n    // Get the width of the main element\n    const mainWidth = element.getBoundingClientRect().width;\n\n    // Get the computed style of the ::after pseudo-element\n    const afterStyle = window.getComputedStyle(element, '::after');\n\n    // Try to parse the width of the ::after pseudo-element\n    // This assumes a fixed width is set in CSS\n    const afterWidth = parseFloat(afterStyle.width);\n\n    // If afterWidth is NaN (not a number), it means the width couldn't be parsed,\n    // so we assume it's 0 or handle it according to your use case.\n    return mainWidth + (isNaN(afterWidth) ? 0 : afterWidth);\n  }\n}\n\nfunction renderHtmlBlock(token) {\n  let htmlContainer = document.createElement('DIV');\n  htmlContainer.innerHTML = token.html;\n  htmlContainer.classList.add('canopy-raw-html');\n  return htmlContainer;\n}\n\nfunction renderFootnoteLines(footnoteLinesToken, renderContext) {\n  let div = document.createElement('DIV');\n  let horizonalRule = document.createElement('HR');\n  horizonalRule.classList.add('canopy-footnote-rule');\n  div.appendChild(horizonalRule)\n\n  footnoteLinesToken.lines.forEach(line => {\n    let footnoteSpan = document.createElement('SPAN');\n    footnoteSpan.classList.add('canopy-footnote-span');\n    let textNode = document.createTextNode(line.superscript + '. ');\n    footnoteSpan.appendChild(textNode);\n    line.tokens.forEach((token) => {\n      let tokenElement = renderTokenElement(token, renderContext);\n      footnoteSpan.appendChild(tokenElement);\n    });\n\n    div.appendChild(footnoteSpan);\n  });\n\n  return div;\n}\n\nfunction renderBoldText(token, renderContext) {\n  let element = document.createElement('B');\n  token.tokens.forEach(subtoken => {\n    let subtokenElement = renderTokenElement(subtoken, renderContext);\n    element.appendChild(subtokenElement);\n  });\n  return element;\n}\nfunction renderStrikethroughText(token, renderContext) {\n  let element = document.createElement('S');\n  token.tokens.forEach(subtoken => {\n    let subtokenElement = renderTokenElement(subtoken, renderContext);\n    element.appendChild(subtokenElement);\n  });\n  return element;\n}\n\nfunction renderItalicText(token, renderContext) {\n  let element = document.createElement('I');\n  token.tokens.forEach(subtoken => {\n    let subtokenElement = renderTokenElement(subtoken, renderContext);\n    element.appendChild(subtokenElement);\n  });\n  return element;\n}\n\nfunction renderInlineCodeText(token, renderContext) {\n  let element = document.createElement('CODE');\n  element.innerText = token.text;\n  return element;\n}\n\nexport default renderTokenElement;\n","let REQUEST_CACHE = {};\n\nexport default REQUEST_CACHE;\n","import { canopyContainer, projectPathPrefix } from 'helpers/getters';\nimport Topic from '../../cli/shared/topic';\nimport updateView from 'display/update_view';\nimport REQUEST_CACHE from 'requests/request_cache';\nimport Path from 'models/path';\nimport { preloadImages } from 'requests/helpers';\n\nconst requestJson = (topic) => {\n  if (REQUEST_CACHE[topic.mixedCase]) return REQUEST_CACHE[topic.mixedCase];\n  let dataPath = (projectPathPrefix ? '/' + projectPathPrefix : '') + '/_data/' + topic.requestFileName + '.json';\n\n  let promise = fetch(dataPath). // to allow preloading JSON from HTML\n    then(res => {\n      return res.json().then((json) => {\n        preloadImages(json);\n        return json;\n      });\n    }).catch(() => {\n      REQUEST_CACHE[topic.mixedCase] = undefined; // in case error is connectivity related & will work again later\n      return Promise.reject(new Error(`Unable to find topic file: \"${topic.requestFileName}\"`));\n    });\n\n  REQUEST_CACHE[topic.mixedCase] = promise;\n\n  return promise;\n}\n\nexport default requestJson;\n","import { canopyContainer } from 'helpers/getters';\n\nfunction preloadImages(parsedJson) {\n  let json = JSON.stringify(parsedJson);\n  canopyContainer.imagePreloadArray = canopyContainer.imagePreloadArray || [];\n\n  const regex = /<img\\s[^>]*?src=\\\\?[\"']([^\"']+?)\\\\?[\"']|resourceUrl\": ?\"([^\"]+)/g;\n\n  [...json.matchAll(regex)].map(m => m[1] || m[2]).forEach(url => {\n    let image = new Image();\n    image.src = url; // this loads and caches the image\n    canopyContainer.imagePreloadArray.push(image); // keep reference to avoid garbage collection\n  });\n}\n\nexport { preloadImages };\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#_canopy{margin-top:20px;overflow-anchor:none;padding-bottom:100vh;min-height:110vh;font-family:\\\"Times New Roman\\\",Times,serif}#_canopy h1{text-align:center;margin:auto;margin-top:10px}#_canopy hr{width:120px;display:block;height:1px;border:0;border-top:5px solid #ccc;margin:0px auto}#_canopy h1+section.canopy-topic-section{margin-top:20px}#_canopy section.canopy-topic-section{margin-top:35px}#_canopy section{margin-top:35px}#_canopy p{overflow:visible;font-size:21px;max-width:750px;margin:auto;line-height:1.3;letter-spacing:-0.003em;font-weight:400;position:relative}#_canopy .canopy-topic-section hr+p{margin-top:24px}#_canopy a.canopy-selectable-link{text-decoration:underline #ddd;color:#000;cursor:pointer}#_canopy a.canopy-selectable-link:focus{outline:0}#_canopy a.canopy-selectable-link.canopy-open-link{text-decoration:underline;background-color:#f3f3f3}#_canopy a.canopy-selectable-link:hover{text-decoration:underline #000}#_canopy a.canopy-selectable-link.canopy-selected-link{background-color:#edeefc;text-shadow:0px 0px 0px #000;text-decoration:none}#_canopy a.canopy-selectable-link.canopy-external-link,#_canopy a.canopy-selectable-link.canopy-back-cycle-link,#_canopy a.canopy-selectable-link.canopy-lateral-cycle-link,#_canopy a.canopy-selectable-link.canopy-path-reference{display:inline;white-space:normal;margin-right:1px;padding-right:4px}#_canopy a.canopy-selectable-link.canopy-external-link:not(.canopy-table-list-link-cell) *:last-child::after,#_canopy a.canopy-selectable-link.canopy-back-cycle-link:not(.canopy-table-list-link-cell) *:last-child::after,#_canopy a.canopy-selectable-link.canopy-lateral-cycle-link:not(.canopy-table-list-link-cell) *:last-child::after,#_canopy a.canopy-selectable-link.canopy-path-reference:not(.canopy-table-list-link-cell) *:last-child::after{content:\\\"\\\";font-size:3px;white-space:nowrap}#_canopy a.canopy-selectable-link.canopy-external-link:not(.canopy-table-list-link-cell)::after,#_canopy a.canopy-selectable-link.canopy-back-cycle-link:not(.canopy-table-list-link-cell)::after,#_canopy a.canopy-selectable-link.canopy-lateral-cycle-link:not(.canopy-table-list-link-cell)::after,#_canopy a.canopy-selectable-link.canopy-path-reference:not(.canopy-table-list-link-cell)::after{font-size:9px;white-space:nowrap;position:relative;margin-right:-3px}#_canopy a.canopy-selectable-link.canopy-external-link:not(.canopy-table-list-link-cell):not(.canopy-linked-image)::after{content:\\\"\\\";top:2px;left:1px}#_canopy a.canopy-selectable-link.canopy-path-reference:not(.canopy-table-list-link-cell)::after{content:\\\"\\\";top:1px;left:1.5px}#_canopy a.canopy-selectable-link.canopy-back-cycle-link:not(.canopy-table-list-link-cell)::after{content:\\\"\\\";top:2px;left:0px}#_canopy a.canopy-selectable-link.canopy-lateral-cycle-link:not(.canopy-table-list-link-cell)::after{content:\\\"\\\";top:2px;left:0px}#_canopy span.canopy-text-span{display:block}#_canopy hr.canopy-footnote-rule{width:750px;display:block;height:1px;border:0;border-top:1px solid #ccc;margin:12px 0;padding:0}#_canopy sup{font-size:60%;padding:2px}#_canopy .canopy-footnote-span{font-size:80%;display:block}#_canopy .canopy-footnote-span span{margin-left:2px}#_canopy .canopy-footnote-span:not(:last-child){padding-bottom:7px}#_canopy blockquote{padding:0 .7em;color:#565e67;margin-block-start:.5em;margin-block-end:.5em;margin-inline-start:0px;margin-inline-end:0px}#_canopy blockquote a,#_canopy blockquote a.canopy-selectable-link{color:#565e67}#_canopy blockquote[dir=rtl]{border-right:.25em solid #d3d3d3;margin-right:10px}#_canopy blockquote[dir=ltr]{border-left:.25em solid #d3d3d3;margin-left:10px}#_canopy blockquote a.canopy-selectable-link{text-decoration:underline #d3d3d3}#_canopy pre{margin:10px 10px;background-color:#eff0f1;padding:5px;font-size:85%}#_canopy code{background-color:#eff0f1;font-size:90%}#_canopy table{margin:21px auto auto auto;table-layout:auto;max-width:90%;border-collapse:collapse;border:none;font-size:18px;min-width:500px;table-layout:fixed}#_canopy table:not(:last-child){margin-bottom:21px}#_canopy table td,#_canopy table th{border:1px solid #000;text-align:center;padding:10px}#_canopy table td.hidden,#_canopy table th.hidden{display:none}#_canopy table td br,#_canopy table th br{display:block;content:\\\"\\\";padding-bottom:2px}#_canopy table td.canopy-table-link-cell{cursor:pointer}#_canopy table td.canopy-table-link-cell a.canopy-selectable-link{text-decoration:none;text-shadow:none}#_canopy table td.canopy-table-link-cell:has(.canopy-selected-link){background-color:#edeefc}#_canopy table td.canopy-table-link-cell:has(.canopy-open-link):not(:has(.canopy-selected-link)){background-color:#f3f3f3}#_canopy table td.canopy-table-link-cell:hover:not(:has(.canopy-selected-link)),#_canopy table td.canopy-table-link-cell:hover:has(.canopy-open-link):not(:has(.canopy-selected-link)){background-color:#f5f6fe}#_canopy table td.canopy-table-link-cell:hover:not(:has(.canopy-selected-link)) .canopy-selected-link,#_canopy table td.canopy-table-link-cell:hover:has(.canopy-open-link):not(:has(.canopy-selected-link)) .canopy-selected-link{background-color:#f5f6fe}#_canopy .canopy-table-list{display:flex;flex-direction:column;align-items:center;margin:0 auto}#_canopy .canopy-table-list .canopy-table-list-row{display:flex;justify-content:flex-start}#_canopy .canopy-table-list.canopy-align-right{width:90%;align-items:flex-end}#_canopy .canopy-table-list.canopy-align-right .canopy-table-list-row{justify-content:flex-end}#_canopy .canopy-table-list.canopy-align-left{width:90%;align-items:flex-start}#_canopy .canopy-table-list .canopy-table-list-cell{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center;margin:5px;border:1px solid #000;border-radius:0px;box-sizing:border-box;background-color:#fff;padding:10px;text-align:center;align-self:stretch;white-space:normal}#_canopy .canopy-table-list .canopy-table-list-cell .canopy-table-list-content-container{display:inline;max-width:100%;max-height:100%}#_canopy .canopy-table-list .canopy-table-list-cell br{display:block;content:\\\"\\\";padding-bottom:2px}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell{cursor:pointer;border:1.5px solid #000;border-radius:5px;display:flex;justify-content:center;align-items:center}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-selectable-link{text-decoration:none;text-shadow:none}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-selected-link{background-color:#edeefc}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-open-link:not(.canopy-selected-link){background-color:#f3f3f3}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell:hover:not(.canopy-selected-link),#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell:hover.canopy-open-link:not(.canopy-selected-link){background-color:#f5f6fe}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell:hover:not(.canopy-selected-link) .canopy-selected-link,#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell:hover.canopy-open-link:not(.canopy-selected-link) .canopy-selected-link{background-color:#f5f6fe}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell .canopy-table-list-content-container::after{font-size:11px;margin-left:-5px;position:relative;top:5px;left:5px;white-space:nowrap}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-external-link{margin:5px}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-external-link.canopy-selectable-link *{text-decoration:none}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-external-link .canopy-table-list-content-container::after{content:\\\" \\\";top:3px}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-back-cycle-link .canopy-table-list-content-container::after{content:\\\" \\\"}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-lateral-cycle-link .canopy-table-list-content-container::after{content:\\\" \\\"}#_canopy .canopy-table-list .canopy-table-list-link-cell.canopy-table-list-cell.canopy-path-reference .canopy-table-list-content-container::after{content:\\\" \\\";left:6px;top:2px}#_canopy .canopy-table-list.canopy-quarter-pill .canopy-table-list-cell{width:175px;padding:9px;height:50px}#_canopy .canopy-table-list.canopy-third-pill .canopy-table-list-cell{width:220px;padding:9px;height:50px}#_canopy .canopy-table-list.canopy-half-pill .canopy-table-list-cell{width:270px;padding:9px;height:50px}#_canopy .canopy-table-list.canopy-quarter-card .canopy-table-list-cell{width:175px;height:95px;padding:15px}#_canopy .canopy-table-list.canopy-third-card .canopy-table-list-cell{width:215px;height:120px;padding:15px}#_canopy .canopy-table-list.canopy-half-tube .canopy-table-list-cell{width:285px;height:160px;padding:30px}#_canopy .canopy-table-list.canopy-half-card .canopy-table-list-cell{width:285px;height:265px;min-height:160px;padding:30px}#_canopy .canopy-table-list:not(:first-child){margin-top:15px}#_canopy .canopy-table-list:not(:last-child){margin-bottom:15px}#_canopy .canopy-image{display:block;object-fit:cover;margin-top:15px}#_canopy .canopy-image:not(:last-child){margin-bottom:15px}#_canopy .canopy-image a{margin:0 auto;display:block}#_canopy .canopy-image img{display:block;width:100%;margin:0 auto}#_canopy .canopy-image span.canopy-image-caption{margin:0px auto;width:100%;padding:6px 6px;text-align:left;display:block;font-size:16px;line-height:18px;color:#595959;background-color:#fff}#_canopy .canopy-image span.canopy-image-caption a{color:#595959}#_canopy .canopy-image span.canopy-image-caption span{display:inline}#_canopy div.canopy-image-div{float:right;border:1px solid #c8ccd1;padding:3px;background-color:#f8f9fa;font-size:94%;text-align:center;overflow:hidden;margin:10px}#_canopy .canopy-open-link .canopy-image,#_canopy .canopy-selected-link .canopy-image{position:relative}#_canopy .canopy-selected-link .canopy-image::after{content:\\\"\\\";position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(130,150,250,.3);pointer-events:none}#_canopy .canopy-open-link:not(.canopy-selected-link) .canopy-image::after{content:\\\"\\\";position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(128,128,128,.2);pointer-events:none}#_canopy div.canopy-image-div>sup{display:block}#_canopy ol,#_canopy ul{margin-top:15px;margin-left:10px;margin-right:10px;margin-bottom:0px}#_canopy ol:not(:last-child),#_canopy ul:not(:last-child){margin-bottom:15px}#_canopy ol li:not(:last-child),#_canopy ul li:not(:last-child){margin-bottom:10px}#_canopy div.canopy-raw-html{display:inline}\", \"\",{\"version\":3,\"sources\":[\"webpack://./client/style/canopy.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"#_canopy {\\n  margin-top: 20px;\\n  overflow-anchor: none; // Prevent browser from trying to maintain position when page contents change, which might interfere with window.scrollTo\\n\\n  /* Removing DOM elements from the bottom of the screen can force the page to scroll upward to the existing elements\\n  which is not animated. If we keep a padding on the bottom of the last element just beyond the viewport, then\\n  removal of elements from the bottom of the visible stack never brings the real bottom of the page into view, and so\\n  the scroll upwards can be animated using the window.scrollTo method. */\\n\\n  padding-bottom: calc(100vh);\\n  min-height: calc(110vh); // to avoid scroll bar appearing when page length changes for small content that doesn't need scrolling\\n\\n  font-family: \\\"Times New Roman\\\", Times, serif;\\n\\n  h1 {\\n    text-align: center;\\n    margin: auto;\\n    margin-top: 10px;\\n  }\\n\\n  hr {\\n    width: 120px;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 5px solid #ccc;\\n    margin: 0px auto;\\n  }\\n\\n  h1 + section.canopy-topic-section {\\n    margin-top: 20px;\\n  }\\n\\n  section.canopy-topic-section {\\n    margin-top: 35px;\\n  }\\n\\n  section {\\n    margin-top: 35px;\\n  }\\n\\n  p {\\n    overflow: visible; // In case external link icon is at end of line\\n    font-size: 21px;\\n    max-width: 750px;\\n    margin: auto;\\n\\n    line-height: 1.3;\\n    letter-spacing: -.003em;\\n    font-weight: 400;\\n\\n    position: relative; // to allow absolute children\\n  }\\n\\n  .canopy-topic-section hr + p {\\n    margin-top: 24px; // 25px minus 1px bar thickness\\n  }\\n\\n///////////// Link styles /////////////////\\n\\n  a.canopy-selectable-link {\\n    text-decoration: underline #DDDDDD;\\n    color: black;\\n    cursor: pointer;\\n\\n    &:focus {\\n      outline:0;\\n    }\\n\\n    &.canopy-open-link {\\n      // text-shadow: .8px 0px 0px #000000;\\n      text-decoration: underline;\\n      background-color: #F3F3F3;\\n    }\\n\\n    &:hover {\\n      text-decoration: underline #000000;\\n    }\\n\\n    &.canopy-selected-link {\\n      background-color: #edeefc;\\n      text-shadow: 0px 0px 0px #000000;\\n      text-decoration: none;\\n    }\\n\\n    &.canopy-external-link, &.canopy-back-cycle-link, &.canopy-lateral-cycle-link, &.canopy-path-reference {\\n      display: inline;\\n      white-space: normal;\\n      margin-right: 1px; // combined with negative margin on the ::after block to prevent following punctuation from wrapping\\n      padding-right: 4px;\\n\\n      &:not(.canopy-table-list-link-cell) *:last-child::after {\\n        content: '';\\n        font-size: 3px;\\n        white-space: nowrap;\\n      }\\n\\n      &:not(.canopy-table-list-link-cell)::after {\\n        font-size: 9px;\\n        white-space: nowrap;\\n        position: relative;\\n        margin-right: -3px;\\n      }\\n    }\\n\\n    &.canopy-external-link:not(.canopy-table-list-link-cell):not(.canopy-linked-image)::after {\\n      content: '';\\n      top: 2px;\\n      left: 1px;\\n    }\\n\\n    &.canopy-path-reference:not(.canopy-table-list-link-cell)::after {\\n      content: '';\\n      top: 1px;\\n      left: 1.5px;\\n    }\\n\\n    &.canopy-back-cycle-link:not(.canopy-table-list-link-cell)::after { // if it is open, it has been inlined and isn't a cycle\\n      content: '';\\n      top: 2px;\\n      left: 0px;\\n    }\\n\\n    &.canopy-lateral-cycle-link:not(.canopy-table-list-link-cell)::after { // if it is open, it has been inlined and isn't a cycle\\n      content: '';\\n      top: 2px;\\n      left: 0px;\\n    }\\n  }\\n\\n/////////////////////////////////////////////\\n\\n  span.canopy-text-span {\\n    display: block;\\n  }\\n\\n  hr.canopy-footnote-rule {\\n    width: 750px;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 1px solid #ccc;\\n    margin: 12px 0;\\n    padding: 0;\\n  }\\n\\n  sup {\\n    font-size: 60%;\\n    padding: 2px;\\n  }\\n\\n  .canopy-footnote-span {\\n    font-size: 80%;\\n    display: block;\\n    span { // text after number\\n      margin-left: 2px;\\n    }\\n    &:not(:last-child) {\\n      padding-bottom: 7px;\\n    }\\n  }\\n\\n  blockquote {\\n    padding: 0 .7em;\\n    color: #565e67;\\n\\n    a, a.canopy-selectable-link {\\n      color: #565e67;\\n    }\\n\\n    &[dir=\\\"rtl\\\"] {\\n      border-right: 0.25em solid lightgray;\\n      margin-right: 10px;\\n    }\\n\\n    &[dir=\\\"ltr\\\"] {\\n      border-left: 0.25em solid lightgray;\\n      margin-left: 10px;\\n    }\\n\\n    margin-block-start: .5em;\\n    margin-block-end: .5em;\\n    margin-inline-start: 0px;\\n    margin-inline-end: 0px;\\n\\n    a.canopy-selectable-link {\\n      text-decoration: underline #D3D3D3;\\n    }\\n  }\\n\\n  pre {\\n    margin: 10px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 85%;\\n  }\\n\\n  code {\\n    background-color: #eff0f1;\\n    font-size: 90%;\\n  }\\n\\n  table {\\n    margin: 21px auto auto auto;\\n    table-layout: auto;\\n    max-width: 90%;\\n    border-collapse: collapse;\\n    border: none; // we put the border on the TDs to allow omitted table cells\\n    font-size: 18px;\\n    min-width: 500px;\\n    table-layout: fixed;\\n\\n    &:not(:last-child) {\\n      margin-bottom: 21px;\\n    }\\n\\n    td, th {\\n      border: 1px solid black;\\n      text-align: center;\\n      padding: 10px;\\n\\n      // width: 0%; // this seems to make cells even without expanding table\\n\\n      &.hidden {\\n        display: none;\\n      }\\n\\n      br {\\n        display: block; // makes it have a width\\n        content: \\\"\\\"; // clears default height\\n        padding-bottom: 2px;\\n      }\\n    }\\n\\n    td.canopy-table-link-cell {\\n      cursor: pointer;\\n\\n      a.canopy-selectable-link {\\n        text-decoration: none;\\n        text-shadow: none;\\n      }\\n\\n      &:has(.canopy-selected-link) {\\n        background-color: #edeefc;\\n      }\\n\\n      &:has(.canopy-open-link):not(:has(.canopy-selected-link)) {\\n        background-color: #F3F3F3;\\n      }\\n\\n      &:hover:not(:has(.canopy-selected-link)), // selected link style overrides hover\\n      &:hover:has(.canopy-open-link):not(:has(.canopy-selected-link)) {\\n        background-color: #f5f6fe;\\n\\n        .canopy-selected-link {\\n            background-color: #f5f6fe;\\n        }\\n      }\\n    }\\n  }\\n\\n  .canopy-table-list {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center; /* This centers the rows within the container */\\n    margin: 0 auto;\\n\\n    .canopy-table-list-row {\\n      display: flex;\\n      justify-content: flex-start;\\n    }\\n\\n    &.canopy-align-right {\\n      width: 90%;\\n      align-items: flex-end;\\n      .canopy-table-list-row {\\n        justify-content: flex-end;\\n      }\\n    }\\n\\n    &.canopy-align-left {\\n      width: 90%;\\n      align-items: flex-start;\\n    }\\n\\n    .canopy-table-list-cell {\\n      display: flex;\\n      flex-direction: row; /* Arrange items horizontally */\\n      flex-wrap: wrap; /* Allow items to wrap within the cell */\\n      justify-content: center; /* Center content horizontally */\\n      align-items: center; /* Center content vertically */\\n      margin: 5px;\\n      border: 1px solid black;\\n      border-radius: 0px;\\n      box-sizing: border-box;\\n      background-color: white;\\n      padding: 10px; /* Add some padding inside cells */\\n      text-align: center; /* This will center the text inside the flex items */\\n      align-self: stretch; /* Stretch the child items to fill the cell's width */\\n      white-space: normal; /* Allow the text to wrap */\\n\\n      .canopy-table-list-content-container {\\n        display: inline;\\n        max-width: 100%;\\n        max-height: 100%;\\n      }\\n\\n      &.canopy-table-list-ordinal-cell .canopy-table-list-content-container {\\n        //width: 80%; // to keep the numbers in a similar location in each cell\\n      }\\n\\n      br {\\n        display: block; // makes it have a width\\n        content: \\\"\\\"; // clears default height\\n        padding-bottom: 2px;\\n      }\\n    }\\n\\n    .canopy-table-list-link-cell.canopy-table-list-cell {\\n      cursor: pointer;\\n      border: 1.5px solid black;\\n      border-radius: 5px;\\n      display: flex;\\n      justify-content: center; /* Center content horizontally */\\n      align-items: center; /* Center content vertically */\\n\\n      &.canopy-selectable-link {\\n        text-decoration: none;\\n        text-shadow: none;\\n      }\\n\\n      &.canopy-selected-link {\\n        background-color: #edeefc;\\n      }\\n\\n      &.canopy-open-link:not(.canopy-selected-link) {\\n        background-color: #F3F3F3;\\n      }\\n\\n      &:hover:not(.canopy-selected-link), // selected link style overrides hover\\n      &:hover.canopy-open-link:not(.canopy-selected-link) {\\n        background-color: #f5f6fe;\\n\\n        .canopy-selected-link {\\n            background-color: #f5f6fe;\\n        }\\n      }\\n\\n      .canopy-table-list-content-container::after {\\n        font-size: 11px;\\n        margin-left: -5px; // Negative margin to pull the icon closer to the last word\\n        position: relative; // Allows for position adjustment\\n        top: 5px; // Move the icon up (- value) or down (+ value)\\n        left: 5px;\\n        white-space: nowrap; // Prevents the icon from wrapping\\n      }\\n\\n      &.canopy-external-link {\\n        margin: 5px; // cancel negative margin\\n\\n        &.canopy-selectable-link * {\\n          text-decoration: none;\\n        }\\n\\n        .canopy-table-list-content-container::after {\\n          content: ' ';\\n          top: 3px;\\n        }\\n      }\\n\\n      &.canopy-back-cycle-link .canopy-table-list-content-container::after { // if it is open, it has been inlined and isn't a cycle\\n        content: ' ';\\n      }\\n\\n      &.canopy-lateral-cycle-link .canopy-table-list-content-container::after { // if it is open, it has been inlined and isn't a cycle\\n        content: ' ';\\n      }\\n\\n      &.canopy-path-reference .canopy-table-list-content-container::after {\\n        content: ' ';\\n        left: 6px;\\n        top: 2px;\\n      }\\n    }\\n\\n    &.canopy-quarter-pill .canopy-table-list-cell {\\n      width: 175px;\\n      padding: 9px;\\n      height: 50px;\\n    }\\n\\n    &.canopy-third-pill .canopy-table-list-cell {\\n      width: 220px;\\n      padding: 9px;\\n      height: 50px;\\n    }\\n\\n    &.canopy-half-pill .canopy-table-list-cell {\\n      width: 270px;\\n      padding: 9px;\\n      height: 50px;\\n    }\\n\\n    &.canopy-quarter-card .canopy-table-list-cell {\\n      width: 175px;\\n      height: 95px;\\n      padding: 15px;\\n    }\\n\\n    &.canopy-third-card .canopy-table-list-cell {\\n      width: 215px;\\n      height: 120px;\\n      padding: 15px;\\n    }\\n\\n    &.canopy-half-tube .canopy-table-list-cell {\\n      width: 285px;\\n      height: 160px;\\n      padding: 30px;\\n    }\\n\\n    &.canopy-half-card .canopy-table-list-cell {\\n      width: 285px;\\n      height: 265px;\\n      min-height: 160px;\\n      padding: 30px;\\n    }\\n\\n    &:not(:first-child) {\\n      margin-top: 15px;\\n    }\\n\\n    &:not(:last-child) {\\n      margin-bottom: 15px;\\n    }\\n  }\\n\\n  .canopy-image {\\n    display: block;\\n    object-fit: cover;\\n\\n    &:not(:last-child) {\\n      margin-bottom: 15px;\\n    }\\n\\n    margin-top: 15px;\\n\\n    a {\\n      margin: 0 auto;\\n      display: block;\\n    }\\n\\n    img {\\n      display: block;\\n      width: 100%;\\n      margin: 0 auto;\\n    }\\n\\n    span.canopy-image-caption {\\n      margin: 0px auto;\\n      width: 100%;\\n      padding: 6px 6px;\\n      text-align: left;\\n      display: block;\\n      font-size: 16px;\\n      line-height: 18px;\\n      color: #595959;\\n      background-color: white;\\n\\n      a {\\n        color: #595959;\\n      }\\n\\n      span {\\n        display: inline;\\n      }\\n    }\\n  }\\n\\n  div.canopy-image-div {\\n    float: right;\\n    border: 1px solid #c8ccd1;\\n    padding: 3px;\\n    background-color: #f8f9fa;\\n    font-size: 94%;\\n    text-align: center;\\n    overflow: hidden;\\n    margin: 10px;\\n  }\\n\\n  .canopy-open-link .canopy-image, .canopy-selected-link .canopy-image {\\n    position: relative;\\n  }\\n\\n  .canopy-selected-link .canopy-image::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: rgba(130, 150, 250, 0.3); /* Deeper blue with 50% opacity */\\n    pointer-events: none; /* Ensures the overlay doesn't interfere with clicks */\\n  }\\n\\n  .canopy-open-link:not(.canopy-selected-link) .canopy-image::after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: rgba(128, 128, 128, 0.2); /* Gray color with 50% opacity */\\n    pointer-events: none; /* Ensures the overlay doesn't interfere with clicks */\\n  }\\n\\n  div.canopy-image-div > sup {\\n    display: block;\\n  }\\n\\n  ol, ul {\\n    margin-top: 15px;\\n    margin-left: 10px;\\n    margin-right: 10px;\\n    margin-bottom: 0px;\\n\\n    &:not(:last-child) {\\n      margin-bottom: 15px;\\n    }\\n\\n    li:not(:last-child) {\\n      margin-bottom: 10px;\\n    }\\n  }\\n\\n  div.canopy-raw-html {\\n    display: inline;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: theres no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, []\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), []\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), []\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, []\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), []\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport { scrollElementToPosition } from 'display/helpers';\n\nfunction topicParentLink() {\n  let link = Link.selection;\n  let newLink = Link.lastSelectionOfParagraph(link.enclosingParagraph.topicParagraph.parentParagraph) ||\n    link.enclosingParagraph.topicParagraph.parentLink;\n\n  return newLink?.select() || Link.deselect();\n}\n\nfunction moveToParent() {\n  let link = Link.selection;\n  let parentLink = link && link.parentLink && Link.lastSelectionOfParagraph(link.parentLink?.enclosingParagraph) || link.parentLink;\n  let selectionInRootParagraph = !parentLink;\n\n  if (selectionInRootParagraph && !link.isVisible()) {\n    let sectionElement = Link.selection.enclosingParagraph.sectionElement;\n    return scrollElementToPosition(sectionElement, {targetRatio: 0.75, maxScrollRatio: 0.5, minDiff: 0, direction: 'up', behavior: 'smooth'});\n  }\n\n  if (selectionInRootParagraph && link.isVisible()) {\n    return updateView(link.enclosingParagraph.path); // deselect link\n  }\n\n  if (parentLink && !parentLink.isVisible()) {\n    return scrollElementToPosition(parentLink.element, {targetRatio: 0.3, maxScrollRatio: 0.5, minDiff: 50, direction: 'up', behavior: 'smooth'});\n  }\n\n  if (parentLink && parentLink.isVisible()) {\n    return link.parentLink.select();\n  }\n}\n\nfunction moveDownOrRedirect({ newTab, altKey, shiftKey }) {\n  let firstChild = !Link.selection.isClosedCycle && Link.selection.firstChild;\n\n  if (firstChild && firstChild.isBelowViewport() && !Link.selection.isPathReference) {\n    return scrollElementToPosition(firstChild.element, {targetRatio: 0.25, maxScrollRatio: 0.5, minDiff: 50, direction: 'down', behavior: 'smooth', side: 'bottom'});\n  }\n\n  if (firstChild && firstChild.isAboveViewport() && !Link.selection.isPathReference) {\n    return scrollElementToPosition(firstChild.element, {targetRatio: 0.25, maxScrollRatio: 0.5, minDiff: 50, direction: 'up', behavior: 'smooth', side: 'bottom'});\n  }\n\n  if (Link.selection.isParent && !Link.selection.hasChildren && !Link.selection.cycle && !Link.selection.isPathReference) {\n    let sectionElement = Link.selection.targetParagraph.sectionElement;\n    return scrollElementToPosition(sectionElement, {targetRatio: 0.2, maxScrollRatio: 0.5, minDiff: 50, direction: 'down', behavior: 'smooth', side: 'bottom'});\n  }\n\n  if (firstChild && firstChild.isVisible && !firstChild.isSelected && !newTab && !Link.selection.isPathReference) { // selectALink\n    return firstChild.select({ newTab, redirect: altKey, inlineCycles: shiftKey });\n  }\n\n  return Link.selection.execute({ newTab, redirect: altKey, inlineCycles: shiftKey });\n}\n\nfunction inlineACycleLink() {\n  if (!Link.selection.isCycle) return moveInDirection('down');\n  return Link.selection.execute({ inlineCycles: true });\n}\n\nfunction copyDecodedUrl() {\n  navigator.clipboard.writeText(decodeURIComponent(window.location));\n}\n\nfunction goToDefaultTopic() {\n  return updateView(\n    Path.default,\n    null\n  );\n}\n\nfunction zoomOnLocalPath() {\n  let relativeLinkNumber = Link.selection.relativeLinkNumber;\n\n  return Link.selection?.inlinePath.lastSegment.display({ renderOnly: true }).then(() => {\n    Link.from(() => Link.selection?.inlinePath.lastSegment.parentParagraph.nthLink(relativeLinkNumber)).select({ scrollStyle: 'instant' });\n  });\n}\n\nfunction removeSelection() {\n  return updateView(Path.current.rootTopicPath, null, { scrollStyle: 'instant' });\n}\n\nfunction duplicate() {\n  return window.open(window.location.href, '_blank');\n}\n\nexport {\n  moveToParent,\n  moveDownOrRedirect,\n  inlineACycleLink,\n  topicParentLink,\n  zoomOnLocalPath,\n  removeSelection,\n  duplicate,\n  copyDecodedUrl,\n  goToDefaultTopic\n};\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport { scrollElementToPosition } from 'display/helpers';\n\nfunction moveInDirection(direction, options) {\n  const currentLinkElement = Link.selection?.element;\n\n  if (direction === 'up') {\n    if (!currentLinkElement && Link.visible.length > 1) { // up shouldn't go down but should select a link unless none are visible\n      // return Path.rendered.selectALink({ direction: 'up' });\n      // Actually do nothing because its the wrong direction\n    }\n    let candidateLinks = Array.from(document.querySelectorAll('.canopy-selectable-link')).filter(link => link.offsetParent !== null);\n    let currentSelectionHigherRect = getBoundingRectInDirection(currentLinkElement, 'up');\n    let currentSelectionLowerRect = getBoundingRectInDirection(currentLinkElement, 'down');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers\n      .filter(rect => isHigher(rect, currentSelectionLowerRect)\n        && !isVerticallyOverlapping(rect, currentSelectionLowerRect)\n        && rect.element !== currentLinkElement);\n\n    if (candidateRectContainers.length === 0) {\n      if (currentSelectionLowerRect.top < -10) {\n        return scrollElementToPosition(currentLinkElement, {targetRatio: 0.25, maxScrollRatio: 0.5, minDiff: 50, direction: 'up', behavior: 'smooth'});\n      } else {\n        return Path.root.display();\n      }\n    }\n\n    let lowestHigherRect = candidateRectContainers\n      .reduce((lowestHigherRect, newRect) => {\n        let bestLink = Link.for(lowestHigherRect.element);\n        let newLink = Link.for(newRect.element);\n\n        // Prefer parent within higher paragraph\n        if (newLink.siblingOf(bestLink) && bestLink.isParentLinkOf(Link.selection.enclosingParagraph)) return lowestHigherRect;\n        if (bestLink.siblingOf(newLink) && Link.for(newRect.element).isParentLinkOf(Link.selection?.enclosingParagraph)) return newRect;\n\n        if (isLower(lowestHigherRect, newRect) && // of those links that are higher than current selection, prefer lower if noticeable\n          !isVerticallyOverlapping(lowestHigherRect, newRect) &&\n          !isVerticallyOverlapping(lowestHigherRect, currentSelectionLowerRect)) return lowestHigherRect;\n\n        if (isLower(newRect, lowestHigherRect) &&\n          !isVerticallyOverlapping(lowestHigherRect, newRect) &&\n          !isVerticallyOverlapping(newRect, currentSelectionLowerRect)) return newRect;\n\n        if (isHorizontallyWithin(currentSelectionHigherRect, lowestHigherRect)) return lowestHigherRect;\n        if (isHorizontallyWithin(currentSelectionHigherRect, newRect)) return newRect;\n        if (isHorizontallyWithin(lowestHigherRect, currentSelectionHigherRect) && !isHorizontallyWithin(newRect, currentSelectionHigherRect)) return lowestHigherRect;\n        if (isHorizontallyWithin(newRect, currentSelectionHigherRect) && !isHorizontallyWithin(lowestHigherRect, currentSelectionHigherRect)) return newRect;\n\n        if (isHorizontallyOverlapping(lowestHigherRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(newRect, currentSelectionHigherRect)) return lowestHigherRect;\n        if (isHorizontallyOverlapping(newRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(lowestHigherRect, currentSelectionHigherRect)) return newRect;\n\n        if (lowestHigherRect.element.closest('p.canopy-paragraph') === Link.selection.parentLink.enclosingParagraph.paragraphElement) { // going up to new paragraph\n          if (isHorizontallyOverlapping(lowestHigherRect, currentSelectionHigherRect) && isHorizontallyOverlapping(newRect, currentSelectionHigherRect)) {\n            return greaterHorizontalOverlap(currentSelectionHigherRect, lowestHigherRect, newRect);\n          } else {\n            return horizontallyCloserRect(lowestHigherRect, newRect, currentSelectionHigherRect);\n          }\n        } else { // going up in same paragraph\n          if (isHorizontallyOverlapping(lowestHigherRect, currentSelectionLowerRect) && isHorizontallyOverlapping(newRect, currentSelectionLowerRect)) {\n            return greaterHorizontalOverlap(currentSelectionLowerRect, lowestHigherRect, newRect);\n          } else {\n            return horizontallyCloserRect(lowestHigherRect, newRect, currentSelectionLowerRect);\n          }\n        }\n      });\n\n    scrollOrSelect(lowestHigherRect, { direction: 'up'} );\n\n  } else if (direction === 'down') {\n    if (!currentLinkElement) return Path.rendered.selectALink({ direction: 'down' });\n\n    let candidateLinks = Array.from(document.querySelectorAll('.canopy-selectable-link')).filter(link => link.offsetParent !== null && isVisible(link));\n    let currentSelectionHigherRect = getBoundingRectInDirection(currentLinkElement, 'up');\n    let currentSelectionLowerRect = getBoundingRectInDirection(currentLinkElement, 'down');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers\n      .filter(rect => isLower(rect, currentSelectionHigherRect)\n        && !isVerticallyOverlapping(rect, currentSelectionHigherRect)\n        && isInViewportVertically(rect)\n        && rect.element !== currentLinkElement);\n\n    if (candidateRectContainers.length === 0) {\n      let sectionElement = Paragraph.current.sectionElement;\n      return scrollElementToPosition(sectionElement, {targetRatio: 0.05, maxScrollRatio: 0.5, minDiff: 50, direction: 'down', behavior: 'smooth', side: 'bottom'});\n    }\n\n    let highestLowerRect = candidateRectContainers\n      .reduce((highestLowerRect, newRect) => {\n        let bestLink = Link.for(highestLowerRect.element);\n        let newLink = Link.for(newRect.element);\n\n        // prefer previous selection of paragraph\n        if (newLink.isLastSelection && bestLink.siblingOf(newLink)) return newRect;\n        if (bestLink.isLastSelection && newLink.siblingOf(bestLink)) return highestLowerRect;\n\n        // going down to new paragraph, prefer first link rather than geometrically proximate\n        // if (newLink.firstChildOf(Link.selection) && bestLink.siblingOf(newLink)) return newRect;\n        // if (bestLink.firstChildOf(Link.selection) && newLink.siblingOf(bestLink)) return highestLowerRect;\n\n        // If we are previewing a path reference, 'down' should take us down the open path\n        if (bestLink.isOpen) return highestLowerRect;\n        if (newLink.isOpen) return newRect;\n\n        if (isHigher(highestLowerRect, newRect) &&\n          !isVerticallyOverlapping(highestLowerRect, newRect) &&\n          !isVerticallyOverlapping(highestLowerRect, currentSelectionHigherRect)) return highestLowerRect; // prefer the higher element if noticeably higher\n\n        if (isHigher(newRect, highestLowerRect) &&\n          !isVerticallyOverlapping(highestLowerRect, newRect) &&\n          !isVerticallyOverlapping(newRect, currentSelectionHigherRect)) return newRect;\n\n        if (isHorizontallyWithin(currentSelectionHigherRect, highestLowerRect)) return highestLowerRect;\n        if (isHorizontallyWithin(currentSelectionHigherRect, newRect)) return newRect;\n        if (isHorizontallyWithin(highestLowerRect, currentSelectionHigherRect) && !isHorizontallyWithin(newRect, currentSelectionHigherRect)) return highestLowerRect;\n        if (isHorizontallyWithin(newRect, currentSelectionHigherRect) && !isHorizontallyWithin(highestLowerRect, currentSelectionHigherRect)) return newRect;\n\n        if (highestLowerRect.element.closest('p.canopy-paragraph') === Link.selection?.targetParagraph?.paragraphElement) { // going down into new paragraph\n          if (isHorizontallyOverlapping(highestLowerRect, currentSelectionLowerRect) && !isHorizontallyOverlapping(newRect, currentSelectionLowerRect)) return highestLowerRect;\n          if (isHorizontallyOverlapping(newRect, currentSelectionLowerRect) && !isHorizontallyOverlapping(highestLowerRect, currentSelectionLowerRect)) return newRect;\n          if (Paragraph.current.links[0].element === highestLowerRect.element) return highestLowerRect; // prefer first link if it is close\n          if (Paragraph.current.links[0].element === newRect.element) return newRect;\n          return greaterHorizontalOverlap(currentSelectionHigherRect, highestLowerRect, newRect);\n        } else { // going down in same paragraph\n          if (isHorizontallyOverlapping(highestLowerRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(newRect, currentSelectionHigherRect)) return highestLowerRect;\n          if (isHorizontallyOverlapping(newRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(highestLowerRect, currentSelectionHigherRect)) return newRect;\n          return greaterHorizontalOverlap(currentSelectionLowerRect, highestLowerRect, newRect);\n        }\n      });\n\n    scrollOrSelect(highestLowerRect, { direction: 'down'} );\n\n  } else if (direction === 'left') {\n    let candidateLinks = Link.selection.element.closest('p.canopy-paragraph').querySelectorAll('.canopy-selectable-link');\n    let currentSelectionRect = getBoundingRectInDirection(currentLinkElement, 'right');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers.filter(rectObject => rectObject.right < currentSelectionRect.right);\n    candidateRectContainers = candidateRectContainers.filter(rectObject => isVerticallyOverlapping(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let rightmostLeftRect = candidateRectContainers\n        .reduce((rightmostLeftRect, newRect) => {\n          if (rightmostLeftRect.bottom === currentSelectionRect.bottom && newRect.bottom !== currentSelectionRect.bottom) return rightmostLeftRect; // prefer direct left\n          if (newRect.bottom === currentSelectionRect.bottom && rightmostLeftRect.bottom !== currentSelectionRect.bottom) return newRect;\n          if (rightmostLeftRect.right > newRect.right) return rightmostLeftRect;\n          if (rightmostLeftRect.right < newRect.right) return newRect;\n          if (rightmostLeftRect.right === newRect.right) {\n            let yDistanceFromCurrentToBest = distanceComparingSide(currentSelectionRect, rightmostLeftRect, 'bottom');\n            let yDistanceFromCurrentToNew = distanceComparingSide(currentSelectionRect, newRect, 'bottom');\n            return yDistanceFromCurrentToBest > yDistanceFromCurrentToNew ? newRect : rightmostLeftRect;\n          }\n        });\n\n      if (rightmostLeftRect) {\n        return scrollOrSelect(rightmostLeftRect);\n      }\n    }\n\n    // Wrap to upward far-right for LTR (or downward far-left for rtl)\n    let verticalDirectionOfWrap = verticalDirectionToWrapAfterLeftmostLink(currentLinkElement);\n    let horizontalDirectionOfWrap = horizontalDirectionToWrapAfterLink(currentLinkElement, verticalDirectionOfWrap);\n    let verticalSideToCompare = verticalDirectionOfWrap === 'up' ? 'bottom' : 'top';\n    let isInCorrectVerticalDirection = verticalDirectionOfWrap === 'up' ? isHigher : isLower; // has to be eg upward in general\n    let isInBetterVerticalDirection = verticalDirectionOfWrap === 'up' ? isLower : isHigher; // but of the upward links, eg, lower is better\n    let closerToCorrectHorizontalEdge = horizontalDirectionOfWrap === 'right' ? rightMostRect : leftMostRect;\n\n    candidateRectContainers = rectContainers.filter(rectObject => isInCorrectVerticalDirection(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => !isVerticallyOverlapping(rectObject, currentSelectionRect)); // if left and right accept overlap wrap must not\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let rightmostUpwardRect = candidateRectContainers // name reflects LTR text\n        .reduce((rightmostUpwardRect, newRect) => {\n          if (isInBetterVerticalDirection(rightmostUpwardRect, newRect) && !isVerticallyOverlapping(rightmostUpwardRect, newRect)) return rightmostUpwardRect;\n          if (isInBetterVerticalDirection(newRect, rightmostUpwardRect) && !isVerticallyOverlapping(rightmostUpwardRect, newRect)) return newRect;\n          return closerToCorrectHorizontalEdge(rightmostUpwardRect, newRect);\n        });\n\n      if (rightmostUpwardRect) {\n        return scrollOrSelect(rightmostUpwardRect);\n      }\n    }\n\n    // Wrap to rightmost bottom (or leftmost top for RTL)\n    let verticalDirectionOfExtremeWrap = verticalDirectionToWrapAfterFinalLeftmostLink(currentLinkElement);\n    let horizontalDirectionOfExtremeWrap = horizontalDirectionToWrapAfterExtremeLink(currentLinkElement, verticalDirectionOfExtremeWrap);\n    let verticalSideToCompareExtremeWrap = verticalDirectionOfExtremeWrap === 'down' ? 'top' : 'bottom';\n    let horizontalSideToCompareExtremeWrap = horizontalDirectionOfExtremeWrap;\n    let isVerticallyFarther = verticalDirectionOfExtremeWrap === 'up' ? isHigher : isLower;\n    let closerToCorrectExtremeHorizontalEdge = horizontalDirectionOfExtremeWrap === 'right' ? rightMostRect : leftMostRect;\n\n    let rightBottomMostRect = rectContainers // Name reflects LTR text\n      .reduce((rightBottomMostRect, newRect) => {\n        if (isVerticallyFarther(rightBottomMostRect, newRect)  && !isVerticallyOverlapping(rightBottomMostRect, newRect)) return rightBottomMostRect;\n        if (isVerticallyFarther(newRect, rightBottomMostRect) &&  !isVerticallyOverlapping(rightBottomMostRect, newRect)) return newRect;\n        return closerToCorrectExtremeHorizontalEdge(rightBottomMostRect, newRect);\n      });\n\n    if (rightBottomMostRect) {\n      return scrollOrSelect(rightBottomMostRect);\n    }\n\n  } else if (direction === 'right') {\n    let candidateLinks = Link.selection.element.closest('p.canopy-paragraph').querySelectorAll('.canopy-selectable-link');\n    let currentSelectionRect = getBoundingRectInDirection(currentLinkElement, 'left');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers.filter(rectObject => rectObject.left > currentSelectionRect.left);\n    candidateRectContainers = candidateRectContainers.filter(rectObject => isVerticallyOverlapping(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let leftmostRightRect = candidateRectContainers\n        .reduce((leftmostRightRect, newRect) => {\n          if (leftmostRightRect.bottom === currentSelectionRect.bottom && newRect.bottom !== currentSelectionRect.bottom) return leftmostRightRect; // prefer direct right\n          if (newRect.bottom === currentSelectionRect.bottom && leftmostRightRect.bottom !== currentSelectionRect.bottom) return newRect;\n          if (leftmostRightRect.left < newRect.left) return leftmostRightRect;\n          if (leftmostRightRect.left > newRect.left) return newRect;\n          if (leftmostRightRect.left === newRect.left) {\n            return topMostRect(leftmostRightRect, newRect);\n          }\n        });\n\n      if (leftmostRightRect) {\n        return scrollOrSelect(leftmostRightRect);\n      }\n    }\n\n    // Wrap to downward far-left (or upward far-right for RTL text)\n    let verticalDirectionOfWrap = verticalDirectionToWrapAfterRightmostLink(currentLinkElement);\n    let horizontalDirectionOfWrap = horizontalDirectionToWrapAfterLink(currentLinkElement, verticalDirectionOfWrap);\n    let verticalSideToCompare = verticalDirectionOfWrap === 'up' ? 'top' : 'bottom';\n    let horizontalSideToCompare = horizontalDirectionOfWrap;\n    let isInCorrectVerticalDirection = verticalDirectionOfWrap === 'up' ? isHigher : isLower;\n    let isInBetterVerticalDirection = verticalDirectionOfWrap === 'up' ? isLower : isHigher;\n    let isHorizontalExtreme = horizontalDirectionOfWrap === 'left' ? isLeftward : isRightward;\n    let closerToCorrectHorizontalEdge = horizontalDirectionOfExtremeWrap === 'right' ? rightMostRect : leftMostRect;\n\n    candidateRectContainers = rectContainers.filter(rectObject => isInCorrectVerticalDirection(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => !isVerticallyOverlapping(rectObject, currentSelectionRect)); // if left and right accept overlap wrap must not\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let leftmostDownwardRect = candidateRectContainers // Name reflects LTR text\n        .reduce((leftmostDownwardRect, newRect) => {\n          if (isInBetterVerticalDirection(leftmostDownwardRect, newRect) && !isVerticallyOverlapping(leftmostDownwardRect, newRect)) return leftmostDownwardRect;\n          if (isInBetterVerticalDirection(newRect, leftmostDownwardRect) && !isVerticallyOverlapping(newRect, leftmostDownwardRect)) return newRect;\n          return closerToCorrectHorizontalEdge(leftmostDownwardRect, newRect);\n        });\n\n      if (leftmostDownwardRect) {\n        return scrollOrSelect(leftmostDownwardRect);\n      }\n    }\n\n    // Wrap to leftmost top (or rightmost bottom for RTL)\n    let verticalDirectionOfExtremeWrap = verticalDirectionToWrapAfterFinalRightmostLink(currentLinkElement);\n    let horizontalDirectionOfExtremeWrap = horizontalDirectionToWrapAfterExtremeLink(currentLinkElement, verticalDirectionOfExtremeWrap);\n    let extremeHorizontalPosition = horizontalDirectionOfExtremeWrap === 'left' ? 0 : window.innerWidth;\n    let verticalSideToCompareExtremeWrap = verticalDirectionOfExtremeWrap === 'up' ? 'top' : 'bottom';\n    let horizontalSideToCompareExtremeWrap = horizontalDirectionOfExtremeWrap;\n    let isVerticallyFarther = verticalDirectionOfExtremeWrap === 'up' ? isHigher : isLower;\n    let closerToCorrectHorizontalExtremeEdge = horizontalDirectionOfExtremeWrap === 'right' ? rightMostRect : leftMostRect;\n\n    let leftmostTopRect = rectContainers\n      .reduce((leftmostTopRect, newRect) => {\n        if (isVerticallyFarther(leftmostTopRect, newRect)) return leftmostTopRect;\n        if (isVerticallyFarther(newRect, leftmostTopRect)) return newRect;\n        if (leftmostTopRect[verticalSideToCompareExtremeWrap] === newRect[verticalSideToCompareExtremeWrap]) {\n          return closerToCorrectHorizontalExtremeEdge(leftmostTopRect, newRect);\n        }\n      });\n\n    if (leftmostTopRect) {\n      return scrollOrSelect(leftmostTopRect);\n    }\n  }\n}\n\nfunction isHigher(rect1, rect2) {\n  if (rect1.bottom < rect2.bottom) return true;\n  return false;\n}\n\nfunction isLower(rect1, rect2) {\n  if (rect1.top > rect2.top) return true;\n  return false;\n}\n\nfunction bottomsAreEven(rect1, rect2) {\n  if (rect1.bottom === rect2.bottom) return true;\n  return false;\n}\n\nfunction topsAreEven(rect1, rect2) {\n  if (rect1.top === rect2.top) return true;\n  return false;\n}\n\nfunction isHorizontallyEvenWith(rect1, rect2) {\n  if (Math.abs(rect1.top - rect2.top) < 30) return true;\n  return false;\n}\n\nfunction isRightward(rect1, rect2) {\n  if (rect1.left > rect2.left) return true;\n  return false;\n}\n\nfunction isLeftward(rect1, rect2) {\n  if (rect1.right < rect2.right) return true;\n  return false;\n}\n\nfunction rightMostRect(rect1, rect2) {\n  return rect1.right > rect2.right ? rect1 : rect2;\n}\n\nfunction leftMostRect(rect1, rect2) {\n  return rect1.left < rect2.left ? rect1 : rect2;\n}\n\nfunction topMostRect(rect1, rect2) {\n  return rect1.top < rect2.top ? rect1 : rect2;\n}\n\nfunction bottomMostRect(rect1, rect2) {\n  return rect1.bottom > rect2.bottom ? rect1 : rect2;\n}\n\nfunction isHorizontallyWithin(rect1, rect2) {\n  if (rect1.left > rect2.left && rect1.right < rect2.right) return true;\n  return false;\n}\n\nfunction isHorizontallyOverlapping(rect1, rect2) {\n  return (rect1.left < rect2.right && rect2.left < rect1.right);\n}\n\nfunction isVerticallyOverlapping(rect1, rect2) {\n  return (\n    (rect1.top <= rect2.bottom && rect1.bottom >= rect2.top) ||\n    (rect2.top <= rect1.bottom && rect2.bottom >= rect1.top)\n  );\n}\n\nfunction isInViewportVertically(rectObject) {\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n\n  // Check if the top or the bottom of the rectangle is within the viewport\n  return (\n    (rectObject.top >= 0 && rectObject.top <= viewportHeight) ||\n    (rectObject.bottom >= 0 && rectObject.bottom <= viewportHeight)\n  );\n}\n\nfunction horizontallyCloserRect(rect1, rect2, targetRect) {\n  const midpointRect1 = (rect1.left + rect1.right) / 2;\n  const midpointRect2 = (rect2.left + rect2.right) / 2;\n  const midpointTarget = (targetRect.left + targetRect.right) / 2;\n\n  const distanceToRect1 = Math.abs(midpointRect1 - midpointTarget);\n  const distanceToRect2 = Math.abs(midpointRect2 - midpointTarget);\n\n  if (distanceToRect1 < distanceToRect2) {\n    return rect1;\n  } else {\n    return rect2;\n  }\n}\n\nfunction isVisible(element) {\n  const style = window.getComputedStyle(element);\n  return style.display !== 'none' && style.visibility !== 'hidden' && style.opacity !== '0' && style.opacity !== '0%';\n}\n\nfunction scrollOrSelect(rect, options) {\n  const amountOfLinkThatMustBeVisibleToSelect = 15;\n\n  if (rect.top > window.innerHeight - amountOfLinkThatMustBeVisibleToSelect) {\n    return scrollElementToPosition(rect.element, {targetRatio: 0.2, maxScrollRatio: 0.5, minDiff: 50, direction: 'down', behavior: 'smooth'});\n  } else if (rect.bottom < amountOfLinkThatMustBeVisibleToSelect) {\n    return scrollElementToPosition(rect.element, {targetRatio: 0.25, maxScrollRatio: 0.5, minDiff: 50, direction: 'up', behavior: 'smooth'});\n  } else {\n    const link = new Link(rect.element);\n    return link.select(options);\n  }\n}\n\nfunction greaterHorizontalOverlap(selectedRect, candidateRect1, candidateRect2) {\n  function calculateHorizontalOverlap(rect1, rect2) {\n    return Math.max(0, Math.min(rect1.right, rect2.right) - Math.max(rect1.left, rect2.left));\n  }\n\n  const overlap1 = calculateHorizontalOverlap(selectedRect, candidateRect1);\n  const overlap2 = calculateHorizontalOverlap(selectedRect, candidateRect2);\n\n  if (overlap1 > overlap2) {\n    return candidateRect1;\n  } else {\n    return candidateRect2;\n  }\n}\n\nfunction distanceComparingSide(rect1, rect2, side) {\n  if (typeof rect1 === 'number') rect1 = { [side]: rect1 };\n  if (typeof rect2 === 'number') rect2 = { [side]: rect2 };\n\n  switch (side) {\n    case 'left':\n      return Math.abs(rect1.left - rect2.left);\n    case 'right':\n      return Math.abs(rect1.right - rect2.right);\n    case 'top':\n      return Math.abs(rect1.top - rect2.top);\n    case 'bottom':\n      return Math.abs(rect1.bottom - rect2.bottom);\n    case 'middle':\n      return Math.abs(((rect1.left - rect1.right)/2) - ((rect2.left - rect2.right)/2));\n    default:\n      // Invalid side\n      return null;\n  }\n}\n\nfunction getRectsOfElements(elementArray, currentLinkElement) {\n  const result = [];\n\n  for (const element of elementArray) {\n    let elementForRect = element;\n    if (element.parentNode.tagName === 'TD' && element.parentNode.childNodes.length === 1) elementForRect = element.parentNode; // a link in TD should use the TD's borders\n\n    const subRects = Array.from(elementForRect.getClientRects());\n    let singleRect = { element, text: element.innerText, ...JSON.parse(JSON.stringify(elementForRect.getBoundingClientRect()))};\n\n    if (commonAncestorIsContainer(element, currentLinkElement)) { // a link in a DIV is one rect unlike links in wrapping text\n      result.push(singleRect);\n    } else {\n      for (let i = 0; i < subRects.length; i++) { // treat multiple rects of same link as separate candidates\n        const rect = subRects[i];\n        result.push({\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height,\n          top: rect.top,\n          right: rect.right,\n          bottom: rect.bottom,\n          left: rect.left,\n          element: element,\n          text: element.innerText\n        });\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction commonAncestorIsContainer(element, currentLinkElement) {\n  let ancestor1 = element;\n  let ancestor2 = currentLinkElement;\n\n  while (ancestor1 !== null) {\n    let tempAncestor2 = ancestor2;\n    while (tempAncestor2 !== null) {\n      if (ancestor1 === tempAncestor2) {\n        return ['DIV', 'TABLE', 'TR'].includes(ancestor1.tagName); // these containers imply links are not in free-form wrapped text\n      }\n      tempAncestor2 = tempAncestor2.parentElement;\n    }\n    ancestor1 = ancestor1.parentElement;\n  }\n  return false;\n}\n\nfunction getBoundingRectInDirection(element, direction) {\n  let singleRect = JSON.parse(JSON.stringify(element.getBoundingClientRect()));\n  let multipleRects = mergeRectsWithSameTop(getTextNodesRects(element));\n\n  if (multipleRects.length === 1 || linkTextIsOneUnit(element)) return { element, ...singleRect};\n  if (multipleRects.length === 0) return null;\n\n  switch(direction) {\n    case 'left':\n      return { element, ...multipleRects.reduce((leftmostRect, currentRect) => {\n        return currentRect.right > leftmostRect.right ? leftmostRect : currentRect;\n      })};\n    case 'right':\n      return { element, ...multipleRects.reduce((rightmostRect, currentRect) => {\n        return currentRect.left < rightmostRect.left ?  rightmostRect : currentRect;\n      })};\n    case 'up':\n      return { element, ...multipleRects.reduce((uppermostRect, currentRect) => {\n        return currentRect.bottom < uppermostRect.bottom ? currentRect : uppermostRect;\n      })};\n    case 'down':\n      return { element, ...multipleRects.reduce((lowestRect, currentRect) => {\n        return currentRect.top > lowestRect.top ? currentRect : lowestRect;\n      })};\n    default:\n      throw new Error(\"Invalid direction argument\");\n  }\n\n  function linkTextIsOneUnit(linkElement) { // is wrapped text new unit for proximity calculations or is container one unit?\n    return linkElement.closest('p.canopy-paragraph > div') || linkElement.closest('p.canopy-paragraph > table'); // descendants of a div are not inline, unlike direct children of <p> or eg <b>\n  }\n}\n\nfunction getTextNodesRects(element) {\n  const textNodesRects = [];\n\n  function traverse(node) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      const range = document.createRange();\n      range.selectNodeContents(node);\n      const rects = range.getClientRects();\n      for (let i = 0; i < rects.length; i++) {\n        textNodesRects.push(rects[i]);\n      }\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n      for (const childNode of node.childNodes) {\n        traverse(childNode);\n      }\n    }\n  }\n\n  traverse(element);\n  return textNodesRects.map(rect => JSON.parse(JSON.stringify(rect)));\n}\n\nfunction mergeRectsWithSameTop(rectangles) {\n  const mergedRectangles = [];\n\n  // Sort the rectangles by their top value\n  rectangles.sort((rect1, rect2) => rect1.top - rect2.top);\n\n  let currentRect = rectangles[0];\n\n  for (let i = 1; i < rectangles.length; i++) {\n    const nextRect = rectangles[i];\n\n    // Check if the top values are the same\n    if (currentRect.top === nextRect.top) {\n      // Merge the rectangles horizontally\n      currentRect.left = Math.min(currentRect.left, nextRect.left);\n      currentRect.right = Math.max(currentRect.right, nextRect.right);\n    } else {\n      // Add the current merged rectangle to the result\n      mergedRectangles.push(currentRect);\n\n      // Set the current rectangle to the next one\n      currentRect = nextRect;\n    }\n  }\n\n  // Add the last merged rectangle to the result\n  mergedRectangles.push(currentRect);\n\n  return mergedRectangles;\n}\n\n// ** Direction wrap handling **\n\n// When the user presses right or left, whether we wrap up or down depends on the current text direction,\n// but if we wrap down, whether to pick the right-most link or the left-most link of the lower links\n// depends on the text orientation of their container, not the current container, so this function\n// finds the next link vertically and determines its text orientation in order to decide which side to pick from.\n\nfunction verticalDirectionToWrapAfterRightmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'down' : 'up';\n}\n\nfunction verticalDirectionToWrapAfterLeftmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'up' : 'down';\n}\n\nfunction verticalDirectionToWrapAfterFinalRightmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'up' : 'down';\n}\n\nfunction verticalDirectionToWrapAfterFinalLeftmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'down' : 'up';\n}\n\n// Unlike the vertical direction of the wrap, the horiztonal direction of the wrap is dependent of the text direction\n// of the _next_ link that will get selected, not the current one, and so is not necessarily the opposite horizontal direction of wrap\nfunction horizontalDirectionToWrapAfterLink(linkElement, verticalDirectionOfWrap) {\n  if (verticalDirectionOfWrap === 'up') {\n    return getTextDirectionOfRootAncestor(getPreviousLinkOfParagraph(linkElement)) === 'ltr' ? 'right' : 'left';\n  } else if (verticalDirectionOfWrap === 'down') {\n    return getTextDirectionOfRootAncestor(getNextLinkOfParagraph(linkElement)) === 'ltr' ? 'left' : 'right';\n  }\n}\n\n// This is when in LTR text we go 'right' on the bottom right link or 'left' on the top-left link and cycle on x and y\nfunction horizontalDirectionToWrapAfterExtremeLink(linkElement, verticalDirectionOfWrap) {\n  if (verticalDirectionOfWrap === 'up') {\n    return getTextDirectionOfRootAncestor(getPreviousLinkOfParagraph(linkElement)) === 'ltr' ? 'left' : 'right';\n  } else if (verticalDirectionOfWrap === 'down') {\n    return getTextDirectionOfRootAncestor(getNextLinkOfParagraph(linkElement)) === 'ltr' ? 'right' : 'left';\n  }\n}\n\nfunction getNextLinkOfParagraph(linkElement) {\n  let paragraphElement = linkElement.closest('p.canopy-paragraph');\n  let allLinks = Array.from(paragraphElement.querySelectorAll('.canopy-selectable-link'));\n  let currentLinkIndex = allLinks.indexOf(Link.selection.element);\n\n  if (currentLinkIndex < allLinks.length - 1) {\n    return allLinks[currentLinkIndex + 1];\n  } else {\n    return Link.selection.element;\n  }\n}\n\nfunction getPreviousLinkOfParagraph(linkElement) {\n  let paragraphElement = linkElement.closest('p.canopy-paragraph');\n  let allLinks = Array.from(paragraphElement.querySelectorAll('.canopy-selectable-link'));\n  let currentLinkIndex = allLinks.indexOf(Link.selection);\n\n  if (currentLinkIndex > 0) {\n    return allLinks[currentLinkIndex - 1];\n  } else {\n    return Link.selection.element;\n  }\n}\n\nfunction getTextDirectionOfRootAncestor(element) { // allow manual override of rtl eg for english names of semetic works\n  return element.dir === 'rtl' ? 'rtl' : detectTextDirection(getHighestAncestor(element).innerText);\n}\n\nfunction getHighestAncestor(element) { // find the ancestor element that is a direct child of the paragraph element\n  while(element.parentNode !== Link.selection.element.closest('p.canopy-paragraph')) {\n    element = element.parentNode;\n  }\n  return element;\n}\n\nfunction detectTextDirection(text) {\n  // Regular expression patterns for different character ranges\n  const rtlChars = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\n  const ltrChars = 'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF' +\n                   '\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF';\n  const rtlDirCheck = new RegExp(`^[^${ltrChars}]*[${rtlChars}]`);\n\n  // Check if the text is RTL\n  return rtlDirCheck.test(text) ? 'rtl' : 'ltr';\n}\n\n\nexport {\n  moveInDirection\n}\n","import {\n  topicParentLink,\n  moveToParent,\n  moveDownOrRedirect,\n  inlineACycleLink,\n  zoomOnLocalPath,\n  removeSelection,\n  duplicate,\n  copyDecodedUrl,\n  goToDefaultTopic\n} from 'keys/key_handlers';\nimport { moveInDirection } from 'keys/arrow_keys';\nimport updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\n\nconst registerKeyListeners = () => {\n  window.addEventListener('keydown', function(e) {\n    if (isActiveElementTextInput()) return; // User is typing in text box\n\n    let modifiers =\n      (e.metaKey ? 'meta-' : '') +\n      (e.ctrlKey ? 'ctrl-' : '') +\n      (e.altKey ? 'alt-' : '') +\n      (e.shiftKey ? 'shift-' : '');\n\n    let keyName = keyNames[e.keyCode];\n    let shortcutName = modifiers + keyName;\n    if (['tab', 'down', 'up', 'left', 'right'].includes(keyName)) {\n      if (!((e.metaKey || e.ctrlKey) && ['left', 'right'].includes(keyName))) { // unless browser back\n        e.preventDefault();\n      }\n    }\n\n    if (keyName === 'escape' && !Link.selection) {\n      return goToDefaultTopic();\n    }\n\n    if (Link.selection || universalShortcutRelationships.includes(shortcutName)) {\n      (shortcutRelationships[shortcutName]||function(){})()\n    } else if (shortcutRelationships[shortcutName]) {\n      Path.rendered.selectALink();\n    }\n  });\n}\n\nconst shortcutRelationships = {\n  'left': moveInDirection.bind(null, 'left'),\n  'up': moveInDirection.bind(null, 'up'),\n  'down': moveInDirection.bind(null, 'down'),\n  'shift-down': inlineACycleLink,\n  'alt-down': inlineACycleLink,\n  'right': moveInDirection.bind(null, 'right'),\n\n  'h': moveInDirection.bind(null, 'left'),\n  'k': moveInDirection.bind(null, 'up'),\n  'j': moveInDirection.bind(null, 'down'),\n  'shift-j': inlineACycleLink,\n  'alt-j': inlineACycleLink,\n  'l': moveInDirection.bind(null, 'right'),\n\n  'u': moveToParent,\n  'i': moveToParent,\n  'shift-enter': moveToParent,\n\n  'n': moveDownOrRedirect,\n  'm': moveDownOrRedirect,\n\n  'escape': removeSelection,\n  'z': zoomOnLocalPath,\n  'd': duplicate,\n  'shift-up': topicParentLink,\n  'shift-k': topicParentLink,\n\n  'c': copyDecodedUrl,\n\n  'enter': () => moveDownOrRedirect({}),\n  'meta-enter': () => moveDownOrRedirect({ newTab: true }), // mac\n  'ctrl-enter': () => moveDownOrRedirect({ newTab: true }), // windows & linux\n  'alt-enter': () => moveDownOrRedirect({ newTab: false, altKey: true }),\n  'meta-alt-enter': () => moveDownOrRedirect({ newTab: true, altKey: true }), // mac\n  'ctrl-alt-enter': () => moveDownOrRedirect({ newTab: true, altKey: true }), // windows & linux\n\n  'enter-shift': () => moveDownOrRedirect({}),\n  'meta-shift-enter': () => moveDownOrRedirect({ newTab: true, shiftKey: true }), // mac\n  'ctrl-shift-enter': () => moveDownOrRedirect({ newTab: true, shiftKey: true }), // windows & linux\n  'alt-shift-enter': () => moveDownOrRedirect({ newTab: false, altKey: true, shiftKey: true }),\n  'meta-alt-shift-enter': () => moveDownOrRedirect({ newTab: true, altKey: true, shiftKey: true }), // mac\n  'ctrl-alt-shift-enter': () => moveDownOrRedirect({ newTab: true, altKey: true, shiftKey: true }), // windows & linux\n}\n\nconst universalShortcutRelationships = [ // shortcuts that always work, even if there isn't an already selected link\n  'c',\n  'd',\n  'up',\n  'down'\n];\n\nconst keyNames = {\n  37: 'left',\n  39: 'right',\n  38: 'up',\n  40: 'down',\n\n  71: 'g',\n  72: 'h',\n  75: 'k',\n  74: 'j',\n  76: 'l',\n  186: ';',\n  90: 'z',\n  68: 'd',\n  67: 'c',\n\n  85: 'u',\n  73: 'i',\n  78: 'n',\n  77: 'm',\n\n  13: 'enter',\n  9: 'tab',\n  27: 'escape',\n  32: 'space',\n\n  192: '`',\n\n  49: '1',\n  50: '2',\n  51: '3',\n  52: '4',\n  53: '5',\n}\n\nfunction isActiveElementTextInput() {\n    let activeElement = document.activeElement;\n    if (activeElement && (activeElement.tagName === \"TEXTAREA\" || (activeElement.tagName === \"INPUT\" && [\"text\", \"password\", \"email\", \"search\", \"number\", \"tel\", \"url\"].includes(activeElement.type.toLowerCase())))) {\n        return true; // Active element is a text input or textarea\n    }\n    return false; // Active element is not a text input or textarea\n}\n\nexport default registerKeyListeners;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\n\nfunction registerPopStateListener() {\n  if ('scrollRestoration' in history) {\n    history.scrollRestoration = 'manual';\n  }\n\n  history.replaceState(history.state, document.title, window.location.href); // no-op call to trigger pop state event firing\n\n  window.addEventListener('popstate', (e) => {\n    let linkSelection = Link.selectionPresentInEvent(e) ? new Link(e.state) : null;\n\n    let scrollStyle;\n    if (Path.current.rootTopicPath.equals(Path.url.rootTopicPath)) { // Navigating within the same page\n      scrollStyle = 'smooth';\n    } else { // Nagivating to a new page\n      scrollStyle = 'instant';\n    }\n\n    updateView(\n      Path.url,\n      linkSelection || Link.sessionSelection || Path.url.parentLink,\n      { scrollStyle, scrollDirect: true }\n    );\n  });\n}\n\nexport default registerPopStateListener;\n","import 'style/canopy.scss';\nimport updateView from 'display/update_view';\nimport registerKeyListeners from 'keys/register_key_listeners';\nimport registerPopStateListener from 'history/register_pop_state_listener';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nregisterKeyListeners();\nregisterPopStateListener();\n\nupdateView(\n  Path.initial,\n  Link.savedSelection,\n  { scrollStyle: 'instant', initialLoad: true }\n)\n"],"names":["module","exports","removeStyleCharacters","string","newString","replace","require","Topic","_classCallCheck","Error","this","display","mixedCase","split","map","join","cssMixedCase","CSS","escape","escapedMixedCase","slug","url","fileName","caps","toUpperCase","trim","requestFileName","encodeURIComponent","key","value","topic","convertUnderscoresToSpaces","decodeURIComponent","convertSpacesToUnderscores","displayPathTo","paragraph","visibleParagraphs","options","scrollStyle","allocateSpace","push","isroot","parentLink","_paragraph$parentLink","open","Link","parentParagraph","pathToDisplay","linkToSelect","_pathToDisplay$paragr","_linkToSelect2","_linkToSelect3","arguments","length","undefined","Path","animatePathChange","includes","enclosingPath","tryPathPrefix","_linkToSelect","element","_unused","updateView","isCycle","inlinePath","renderOnly","urlPath","noDisplay","resetDom","header","setHeader","rootTopicPath","addSelectionClass","setTimeout","forEach","show","noScroll","Promise","resolve","scrollPage","_regeneratorRuntime","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","reject","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread","target","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","displayOptions","headerDomElement","document","querySelector","concat","style","opacity","path","console","log","withoutLastSegment","displayPath","defaultRedirect","Array","from","querySelectorAll","getElementsByTagName","linkElement","classList","remove","sectionElement","link","behavior","_options","scrollToParagraph","direction","canopyContainer","initialLoad","scrollElementToPosition","Paragraph","targetRatio","maxScrollRatio","Infinity","side","scrollDirect","childParagraph","paragraphElement","minDiff","Element","containerPointToPutAtTarget","elementRect","getBoundingClientRect","idealTargetPositionOnVisibleContainer","ScrollableContainer","bottom","top","height","tagName","idealScrollY","Math","max","min","actualScrollY","maxScrollDistance","shouldScroll","diff","abs","linkOffScreen","scrollToWithPromise","scrollInProgress","getScrollInProgress","currentScrollOptions","_ref","_callee","lastY","inactivityStart","checks","checkScroll","_context","Date","now","currentY","args","_x","_x2","newPath","_Link$selection","_overlapPath$parentLi","_overlapPath$paragrap","previousPath","effectivePathReference","overlapPath","overlap","strictlyUpward","subsetOf","targetElement","noMinDiff","firstTargetRatio","elementIsFocused","select","noAnimate","rect","upperViewportLimit","lowerViewportLimit","isBelowUpperLimit","isAboveLowerLimit","lastPath","empty","title","lastTopic","renderComplete","pending","fetchAndRenderPath","e","race","success","equals","getElementById","dataset","canopyVersion","defaultTopic","projectPathPrefix","hashUrls","get","isOverflowScrollable","overflowY","window","getComputedStyle","contentOverflows","scrollHeight","clientHeight","windowMode","body","innerHeight","documentElement","scrollY","scrollTop","handler","addEventListener","scrollTo","visibleHeight","currentScroll","_this","el","offsetWidth","offsetHeight","closest","reduce","highest","contains","argument","metadataObject","selectorCallback","otherLink","targetTopic","targetSubtopic","relativeLinkNumber","otherPath","targetPath","elementFromMetadata","metadata","set","HTMLAnchorElement","transferDataset","innerText","_pathString","pathString","_enclosingTopic","enclosingTopic","_enclosingSubtopic","enclosingSubtopic","_typeValue","literalPath","isLocal","lastSubtopic","firstTopic","firstSubtopic","enclosingParagraph","topicParagraph","parentNode","enclosingSectionElement","enclosingPathString","isParent","pathDepth","isGlobal","Number","cycle","targetParagraph","append","firstTopicPath","matches","storedRelativeLinkNumber","links","indexOf","collectMetadata","linkElements","siblings","firstLink","lastLink","_this$parentLink","add","isOpen","childTopic","childSubtopic","isPathReference","inlinedCycleReference","introducesNewCycle","_this$childParagraph","hasLinks","_this$childParagraph2","_otherLink$firstChild","firstChild","viewportHeight","windowHeight","windowWidth","innerWidth","visibleWidth","right","left","topLimit","bottomLimit","overlapsTop","overlapsBottom","replaceTerminalSubtopic","previewPathString","isExternal","externalLink","isSimpleGlobal","newTab","redirect","location","origin","productionPathString","previewPath","_this2","persistLastLinkSelection","href","inlineCycles","pushHistoryState","selectALink","updateSelectionClass","visibility","_Link$lastSelectionOf","lastSelectionOfParagraph","text","linkBySelector","newLink","_document$querySelect","lastSelection","selection","persistInHistory","persistInSession","containsLinkSelectionMetadata","sessionData","sessionStorage","getItem","JSON","parse","history","historySelection","sessionSelection","selectedLink","linkData","stringify","setItem","pathname","hash","replaceState","lastSelectionsOfParagraph","isVisible","otherParagraph","_topicName","topicName","_subtopicName","subtopicName","childNodes","find","isInDom","array","currentElement","currentParagraph","currentTopicParagraph","unshift","linkObjects","n","subtopic","callback","givenTopic","givenSubtopic","_Link$selection2","_Link$selection2$chil","isTopic","lastSelectionOfParent","parentLinks","l","linksBySelector","displayTopicName","parentElement","current","paragraphs","parentPath","integerY","visible","bestParagraph","atY","isArray","pathArray","validatePathArray","arrayToString","String","stringToArray","_otherPath$paragraph","isSingleTopic","isSegmentOf","visitsTopicNotIn","isIn","topicStringArray","some","_this$pathArray$slice","forSegment","lastSegment","_this$lastSegment$arr","_this$paragraph","_this$paragraph$paren","_this$paragraph2","_this$paragraph3","_this$paragraph4","selectedSegment","selectedIndex","currentSegment","currentIndex","start","end","_toConsumableArray","clone","candidatePath","bufferPath","_this$parentPath","_otherPath$parentPath","newSubtopic","addSegment","_ref2","_slicedToArray","_ref3","_ref4","elementAtRelativePath","slashSeparatedUnits","fixOrphanSubtopics","slashSeparatedUnit","match","segment","_ref5","_ref6","topicString","subtopicString","_ref7","_ref8","pathSegmentString","parentPathTopicStrings","topicArray","t","targetPathTopicStrings","enclosingTopicString","enclosingTopicIndex","targetTopicString","targetTopicIndex","rendered","firstDestinationElement","firstDestinationY","longDistanceUp","twoStepChange","siblingOf","parentOf","_Paragraph$selection","present","pathToAppend","linkByChild","rootElement","currentNode","subpath","currentPathDepth","withoutFirstSegment","oldPath","documentTitle","historyApiFunction","pushState","fullPathString","a","b","c","newItem","tuple","renderDomTree","renderContext","paragraphsBySubtopic","createElement","appendChild","tokens","prepend","createSectionElement","localLinkSubtreeCallback","token","fullPath","remainingPath","currentTopic","pathToParagaph","childSectionElement","assign","tokensOfParagraph","currentSubtopic","renderTokenElement","parentElementOrPromise","HTMLElement","preexistingElement","firstSegment","sectionElementPromise","requestJson","topicTokens","previousHeader","headerElement","generateHeader","pathToParagraph","appendingPromise","all","parentSectionElement","subtopicElementPromise","childSectionElementPromise","onLinkClick","preventDefault","_link$parentLink","metaKey","ctrlKey","altKey","shiftKey","redirectingCycle","isSelected","isClosedCycle","isOffScreen","execute","isBackCycle","spanElement","renderTextToken","subtoken","subtokenElement","_CanopyClickHandler","renderLocalLink","assignCycleClasses","isLateralCycle","renderGlobalLink","renderImportLink","setAttribute","renderExternalLink","divElement","imageElement","resourceUrl","caption","altText","handleDelayedImageLoad","renderImage","fragment","createRange","createContextualFragment","html","renderHtmlElement","superscriptElement","textNode","createTextNode","renderFootnoteSymbol","preElement","codeBlockElement","renderCodeBlock","blockQuoteElement","renderBlockQuote","renderList","topLevelNodes","tableElement","rtl","rows","row","tableRowElement","cellObject","tableCellElement","hidden","tokenElement","colspan","rowspan","removeEventListener","merge","renderTable","tableListElement","dir","alignment","SizesByArea","tableListSizeIndex","cellElements","items","cellIndex","contentContainer","list","ordinalElement","innerHTML","ordinal","tempParagraphElement","tempSectionElement","rowSize","tempRowElement","createNewRow","overflow","availableWidth","clientWidth","parseFloat","paddingLeft","paddingRight","availableHeight","paddingTop","paddingBottom","scrollWidth","borderWidth","newRow","remainingCells","cellsToAdd","paddingElement","renderTableList","footnoteLinesToken","div","horizonalRule","lines","line","footnoteSpan","superscript","renderFootnoteLines","renderBoldText","renderStrikethroughText","renderItalicText","renderInlineCodeText","originalHeight","originalOpacity","setProperty","_imageElement$closest","focusedElement","oldBottomOfCurrentParagraph","newScroll","listNodeObjects","listElement","ordered","listNodeObject","listItemElement","tokensOfLine","children","childList","REQUEST_CACHE","dataPath","promise","fetch","res","json","parsedJson","matchAll","m","image","Image","src","preloadImages","___CSS_LOADER_EXPORT___","id","cssWithMappingToString","toString","item","content","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","data","sourceMapping","sourceURLs","sources","sourceRoot","root","g","cssEscape","codeUnit","index","firstCodeUnit","charCodeAt","factory","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","_index","memo","insert","styleTarget","HTMLIFrameElement","contentDocument","head","getTarget","setAttributes","attributes","styleElement","nonce","insertStyleElement","styleTagTransform","removeChild","removeStyleElement","styleSheet","cssText","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","o","globalThis","Function","prop","nc","topicParentLink","moveToParent","selectionInRootParagraph","moveDownOrRedirect","isBelowViewport","isAboveViewport","inlineACycleLink","moveInDirection","currentLinkElement","candidateLinks","offsetParent","currentSelectionHigherRect","getBoundingRectInDirection","currentSelectionLowerRect","candidateRectContainers","getRectsOfElements","isHigher","isVerticallyOverlapping","scrollOrSelect","lowestHigherRect","newRect","bestLink","isParentLinkOf","isLower","isHorizontallyWithin","isHorizontallyOverlapping","greaterHorizontalOverlap","horizontallyCloserRect","rectObject","highestLowerRect","_Link$selection3","_Link$selection3$targ","isLastSelection","currentSelectionRect","rectContainers","rightmostLeftRect","distanceComparingSide","verticalDirectionOfWrap","getTextDirectionOfRootAncestor","horizontalDirectionOfWrap","horizontalDirectionToWrapAfterLink","isInCorrectVerticalDirection","isInBetterVerticalDirection","closerToCorrectHorizontalEdge","rightMostRect","leftMostRect","rightmostUpwardRect","verticalDirectionOfExtremeWrap","horizontalDirectionOfExtremeWrap","horizontalDirectionToWrapAfterExtremeLink","isVerticallyFarther","closerToCorrectExtremeHorizontalEdge","rightBottomMostRect","leftmostRightRect","rect2","rect1","verticalDirectionToWrapAfterRightmostLink","leftmostDownwardRect","verticalDirectionToWrapAfterFinalRightmostLink","verticalSideToCompareExtremeWrap","closerToCorrectHorizontalExtremeEdge","leftmostTopRect","targetRect","midpointRect1","midpointRect2","midpointTarget","selectedRect","candidateRect1","candidateRect2","calculateHorizontalOverlap","elementArray","_step","_iterator","_createForOfIteratorHelper","s","elementForRect","subRects","getClientRects","singleRect","commonAncestorIsContainer","x","y","width","f","ancestor1","ancestor2","tempAncestor2","multipleRects","rectangles","mergedRectangles","sort","currentRect","nextRect","mergeRectsWithSameTop","textNodesRects","traverse","node","nodeType","Node","TEXT_NODE","range","selectNodeContents","rects","ELEMENT_NODE","_step2","_iterator2","getTextNodesRects","leftmostRect","rightmostRect","uppermostRect","lowestRect","getPreviousLinkOfParagraph","getNextLinkOfParagraph","allLinks","currentLinkIndex","getHighestAncestor","RegExp","test","shortcutRelationships","nthLink","navigator","clipboard","writeText","universalShortcutRelationships","keyNames","activeElement","toLowerCase","modifiers","keyName","keyCode","shortcutName","scrollRestoration","linkSelection"],"sourceRoot":""}